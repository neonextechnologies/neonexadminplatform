# Laravel 12 + Bootstrap 5 + jQuery Admin Platform
## Complete Project Plan - AI-Optimized & Minimal Dependencies

---

**Document Version:** 10.0 (Bootstrap + jQuery Stack)  
**Created:** February 16, 2026  
**Framework:** Laravel 12 + Bootstrap 5 + jQuery 3.6.1  
**Theme:** Bootstrap-based admin theme (default: Plain Bootstrap; optional: Limitless/AdminLTE4)  
**Philosophy:** Minimal dependencies, Maximum speed, AI-friendly code  
**Plan Scope:** Core Platform (Phase 0-21)  
**Enterprise Scope:** Optional Add-on (Phase 22-27, separate sellable pack) ‚Üí see `PROJECT_REBUILD_PLAN_BOOTSTRAP_JQUERY_SCALE_ADDON.md`  


## üéØ Project Overview

**‡∏™‡∏£‡πâ‡∏≤‡∏á Laravel Admin Platform ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î** ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Bootstrap 5 + jQuery ‡πÅ‡∏ó‡∏ô Vue/Livewire/Tailwind ‡πÄ‡∏û‡∏∑‡πà‡∏≠:

### ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏´‡∏•‡∏±‡∏Å:
1. **‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á npm build!** - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏´‡πá‡∏ô‡∏ú‡∏•‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (hot reload)
2. **AI ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î** - Bootstrap + jQuery ‡∏°‡∏µ training data ‡∏°‡∏´‡∏≤‡∏®‡∏≤‡∏•
3. **‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡πÄ‡∏•‡πá‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡πá‡∏ß** - ‡πÑ‡∏°‡πà‡∏°‡∏µ Vue/React bundle, vendor ‡∏ô‡πâ‡∏≠‡∏¢
4. **Cursor ‡∏ó‡∏≥ UI ‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏•‡∏∞‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥** - syntax ‡∏á‡πà‡∏≤‡∏¢ ‡∏°‡∏µ snippet ‡πÉ‡∏´‡πâ copy
5. **Theme ‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï** - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å Plain Bootstrap ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ map ‡πÑ‡∏õ AdminLTE4/Limitless ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÅ‡∏ï‡∏∞ feature logic
6. **Traditional MVC** - Controller ‚Üí Blade ‚Üí jQuery AJAX (‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)

---

## ‚úÖ Feature Parity (Livewire Plan ‚Üí Bootstrap Plan)

**‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ä‡∏∏‡∏î‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ ‚Äú‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô stack ‡πÅ‡∏ï‡πà‡∏Ñ‡∏á‡∏£‡∏∞‡∏ö‡∏ö/‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°‚Äù** ‡∏à‡∏≤‡∏Å `PROJECT_REBUILD_PLAN_LIVEWIRE_COMPLETE.md`

### What is already specified (Scope)
- ‚úÖ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏£‡∏∞‡∏ö‡∏ö, ‡πÄ‡∏ü‡∏™, ‡πÅ‡∏•‡∏∞‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏õ‡πá‡∏ô spec ‡∏ó‡∏µ‡πà Cursor ‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡πÑ‡∏î‡πâ
- ‚úÖ Phase 0 (Theme foundation) ‡∏ß‡∏≤‡∏á‡πÅ‡∏ô‡∏ß Theme Adapter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏°‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ
- ‚úÖ Phase 1‚Äì6 ‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏•‡∏∞ snippets ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏° implement ‡πÅ‡∏ö‡∏ö SSR+jQuery
- ‚úÖ Phase 22‚Äì27 ‡∏ñ‡∏π‡∏Å‡πÅ‡∏¢‡∏Å‡πÄ‡∏õ‡πá‡∏ô optional add-on file ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ

### What is NOT fully rewritten yet (Details)
- ‚ö†Ô∏è ‡∏ö‡∏≤‡∏á Phase ‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô baseline spec/snippets (‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡πÉ‡∏´‡πâ Cursor ‡∏ó‡∏≥‡∏ï‡∏≤‡∏° pattern ‡πÑ‡∏î‡πâ) ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏•‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚Äú‡∏ó‡∏∏‡∏Å edge-case/‡∏ó‡∏∏‡∏Å workflow‚Äù ‡πÅ‡∏ö‡∏ö ops-grade
- ‚ö†Ô∏è Builder/Factory/Enterprise-level UX (Phase 10+ ‡πÅ‡∏•‡∏∞ Phase 22‚Äì27) ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏´‡∏•‡∏±‡∏á‡∏ú‡πà‡∏≤‡∏ô Layer gates ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô drift

### Phase Mapping (Conceptual)
| Livewire Complete | Feature Set | Bootstrap Plan Status |
|---|---|---|
| Phase 0 | Base Theme Setup | ‚úÖ Spec ready (theme adapter + minimal shell) |
| Phase 1 | Project setup | ‚úÖ Covered (no npm build approach) |
| Phase 2 | Core migrations | ‚úÖ Covered (RBAC tables + middleware baseline) |
| Phase 3 | Modules scaffold | ‚úÖ Covered (first CRUD baseline pattern; generator in Phase 7) |
| Phase 4 | Core UI (dashboard/profile) | ‚úÖ Covered (Phase 6 dashboard + auth views) |
| Phase 6 | Social login / 2FA / SMTP | ‚ö†Ô∏è To be detailed (will be added in Phase 7+) |
| Phase 7‚Äì13 | Tenant/RBAC/I18n/Menu/Media/Blog/SaaS | ‚úÖ Covered (Layer gates + examples; deepen per module as needed) |
| Phase 17‚Äì19 | Theme/Module/Settings managers | ‚úÖ Covered (kernel service baselines; expand ops-grade later) |
| Phase 21 | Payment & Billing (optional) | ‚ö†Ô∏è Not in core 0‚Äì21 (out of scope for this core plan) |
| Phase 22‚Äì27 | Scale features | ‚úÖ Split to add-on file |

### ‚ùå ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô):
- ‚ùå Vue 3 / React / Livewire (framework overhead)
- ‚ùå Tailwind CSS (bundle ‡πÉ‡∏´‡∏ç‡πà)
- ‚ùå TypeScript (compile overhead)
- ‚ùå Inertia.js (middleware overhead)
- ‚ùå npm build process (‡∏ä‡πâ‡∏≤)
- ‚ùå Alpine.js (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô ‡∏°‡∏µ jQuery ‡πÅ‡∏•‡πâ‡∏ß)
- ‚ùå Vendor packages ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

### üé® Theme Strategy:
```
Theme Adapter Architecture
‚îú‚îÄ‚îÄ Theme 1 (default): Plain Bootstrap (minimal shell) ‚úÖ
‚îú‚îÄ‚îÄ Theme 2 (optional later): AdminLTE4 ‚úÖ
‚îú‚îÄ‚îÄ Theme 3 (optional later): Limitless ‚úÖ
‚îú‚îÄ‚îÄ Future themes: Plug-in style registration
‚îî‚îÄ‚îÄ Common component contract: card/modal/form/datatable (Layer A = plain Bootstrap markup; Layer B = Blade component library)

Goal: Build once, switch theme later without refactor feature logic
```

### üîÅ Theme Swapping Policy (No Rush on AdminLTE4)
1. **‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å Plain Bootstrap ‡∏Å‡πà‡∏≠‡∏ô** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏π‡∏ï‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏•‡∏∞‡∏•‡∏î drift
2. **AdminLTE4 ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ó‡∏±‡∏ô‡∏ó‡∏µ** ‡πÅ‡∏ï‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡∏£‡∏á Theme Adapter ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà Phase 0
3. ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏° `themes/adminlte4` ‡πÅ‡∏•‡∏∞ map component contract ‡πÄ‡∏î‡∏¥‡∏°
4. Route, Controller, Service ‡πÅ‡∏•‡∏∞ Module code ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö theme ‡πÉ‡∏î theme ‡∏´‡∏ô‡∏∂‡πà‡∏á
5. ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ú‡πà‡∏≤‡∏ô helper (`theme_view`, `theme_asset`) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏°‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å config

---

## üì¶ Tech Stack (Minimal & Optimized)

### Backend (Essential Only)
```json
{
    "laravel/framework": "^12.41",
    "php": "^8.2",
    
    // Authentication (built-in Laravel)
    "laravel/sanctum": "^4.0",        // API tokens only
    
    // RBAC (custom or minimal package)
    // Option 1: Custom (0 dependencies)
    // Option 2: spatie/laravel-permission (if needed)
    
    // Multi-tenant (custom or minimal)
    // Will use custom tenant middleware (0 dependencies)
    
    // File uploads
    "intervention/image": "^3.0",     // Image manipulation only
    
    // Optional utilities (install only if needed)
    "barryvdh/laravel-debugbar": "^3.0"  // dev only
}
```

**Total Vendor Packages: ~5-7** (vs 50+ in typical Laravel projects)

### Frontend (CDN First!)
```html
<!-- Bootstrap 5.3.3 (CDN) -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- jQuery 3.6.1 (CDN or local from Limitless) -->
<script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- DataTables (CDN) - Layer C optional - Load per-page only (Index pages) to keep core small -->
<!--
<link href="https://cdn.datatables.net/2.0.0/css/dataTables.bootstrap5.min.css" rel="stylesheet">
<script src="https://cdn.datatables.net/2.0.0/js/dataTables.min.js"></script>
<script src="https://cdn.datatables.net/2.0.0/js/dataTables.bootstrap5.min.js"></script>
-->

<!-- Limitless Custom (local) -->
<link href="{{ asset('themes/limitless/css/limitless.min.css') }}" rel="stylesheet">
<script src="{{ asset('themes/limitless/js/limitless.min.js') }}"></script>
```

**No npm, No build, No webpack!** üéâ

### JavaScript Policy (Vanilla vs jQuery)
**‡∏™‡∏£‡∏∏‡∏õ:** ‡πÉ‡∏ä‡πâ **jQuery ‡πÄ‡∏õ‡πá‡∏ô default ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin UI** (AI-friendly + plugin ecosystem) ‡πÅ‡∏ï‡πà **‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï vanilla JS** ‡πÉ‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏±‡∏ô ‚Äú‡πÄ‡∏•‡πá‡∏Å‡∏Å‡∏ß‡πà‡∏≤/‡∏ï‡∏£‡∏á‡∏Å‡∏ß‡πà‡∏≤‚Äù ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ build

- **jQuery-first** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: DOM manipulation, event delegation, AJAX (`$.ajax`), Bootstrap modal/toast helpers, DataTables (Layer C optional)
- **Vanilla-OK** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: utility ‡πÄ‡∏•‡πá‡∏Å‡πÜ (format, debounce), browser APIs (`URLSearchParams`, `Intl`, `FormData`), ‡∏´‡∏£‡∏∑‡∏≠ vendor ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á build (‡πÄ‡∏ä‡πà‡∏ô `SortableJS`)
- **Rule:** 1 ‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ ‚Äú1 style ‡∏´‡∏•‡∏±‡∏Å‚Äù ‡∏≠‡∏¢‡πà‡∏≤‡∏ú‡∏™‡∏°‡∏´‡∏•‡∏≤‡∏¢ pattern ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
- **No build-only libraries:** ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á lib ‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö bundler/TS/webpack

---

## üìâ File & Asset Minimization Policy (Cursor Guardrails)

‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÉ‡∏´‡πâ Cursor/AI ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡πÇ‡∏î‡∏¢ **‡πÑ‡∏ü‡∏•‡πå‡∏ô‡πâ‡∏≠‡∏¢/‡πÄ‡∏•‡πá‡∏Å** ‡πÅ‡∏•‡∏∞ ‚Äú‡πÑ‡∏°‡πà‡∏•‡∏≤‡∏Å template ‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πâ‡∏≠‡∏ô‚Äù ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏ô

### Hard Rules
- **‡∏´‡πâ‡∏≤‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á megafile**: ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô JS/CSS ‡∏¢‡∏≤‡∏ß ‡πÜ ‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
- **‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ = ‡∏ï‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå**: JS ‡πÅ‡∏ö‡∏ö per-page ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡πÄ‡∏ä‡πà‡∏ô `public/js/pages/<page>.js`) ‡πÅ‡∏•‡∏∞‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ
- **‡∏≠‡∏¢‡πà‡∏≤ copy ‡∏ó‡∏±‡πâ‡∏á template zip**: ‡∏ñ‡πâ‡∏≤‡πÄ‡∏≠‡∏≤ theme ‡∏°‡∏≤ ‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞ **dist ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô** (minified css/js + images ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á)
- **‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏≠‡∏≤ demo/docs/plugins ‡∏ó‡∏±‡πâ‡∏á‡∏ä‡∏∏‡∏î**: ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á `/docs`, `/examples`, `/demo`, plugins ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ
- **assets policy**: CDN-first ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö vendor ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ, local ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ theme/custom ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

### Theme/Templates ‡∏°‡∏±‡∏Å‡πÉ‡∏´‡∏ç‡πà ‚Äî ‚Äú‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πá‡∏Å‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ optimize‚Äù ‡πÑ‡∏î‡πâ
- ‡πÑ‡∏î‡πâ: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å minimal dist (‡πÄ‡∏ä‡πà‡∏ô 1 ‡πÑ‡∏ü‡∏•‡πå CSS, 1 ‡πÑ‡∏ü‡∏•‡πå JS ‡∏Ç‡∏≠‡∏á theme + ‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
- ‡πÑ‡∏î‡πâ: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏¥‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡πà‡∏≠‡∏¢ trim/optimize/‡∏•‡∏ö‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏Ç‡∏≠‡∏á template ‡πÄ‡∏û‡∏¥‡πà‡∏°
- ‡∏´‡πâ‡∏≤‡∏°: optimize ‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏π‡∏ï/‡∏ú‡πà‡∏≤‡∏ô Layer gates (‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ AI drift ‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏ß‡∏•‡∏≤)

### Recommended Asset Layout (Minimal)
```txt
public/
‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îî‚îÄ‚îÄ app.css              # tiny project overrides only
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ app.js               # tiny global: action-router + helpers
‚îÇ   ‚îî‚îÄ‚îÄ pages/
‚îÇ       ‚îú‚îÄ‚îÄ users-index.js   # per-page only
‚îÇ       ‚îî‚îÄ‚îÄ menus-builder.js
‚îî‚îÄ‚îÄ themes/
    ‚îî‚îÄ‚îÄ <theme>/
        ‚îú‚îÄ‚îÄ css/<theme>.min.css
        ‚îú‚îÄ‚îÄ js/<theme>.min.js
        ‚îî‚îÄ‚îÄ images/
```


---

## üß± Layer A/B/C Definition + Hard Gates (Anti-AI-Drift)

> **Important:** ‡πÄ‡∏£‡∏≤ ‚Äú‡∏Ñ‡∏á‡πÄ‡∏•‡∏Ç Phase 0‚Äì21‚Äù ‡∏ï‡∏≤‡∏°‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏ï‡πà‡πÄ‡∏û‡∏¥‡πà‡∏° **Layer gates** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô Cursor/AI drift ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á UI/components/datatable/form builder

### Layer A: Kernel + Module Contracts (Contract-first)
**‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:** ‡∏ó‡∏≥ service/contract/table/command/generator ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö + ‡∏°‡∏µ test/seed/fixtures + ‡∏°‡∏µ UI harness ‚Äú‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‚Äù 3‚Äì5 ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å

**Allowed (Layer A):**
- Blade SSR + Bootstrap markup ‡πÅ‡∏ö‡∏ö‡∏ï‡∏£‡∏á ‡πÜ (`div.card`, `table.table`, `<input class="form-control">`)
- jQuery action router + AJAX ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
- UI harness minimal (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: `/_shell`, `/dashboard`, `/users`, `/settings`)

**Forbidden (Layer A hard gate):**
- ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ/‡∏™‡∏£‡πâ‡∏≤‡∏á reusable UI component library (`<x-limitless::...>`) ‡πÄ‡∏õ‡πá‡∏ô dependency ‡∏´‡∏•‡∏±‡∏Å
- ‡∏´‡πâ‡∏≤‡∏°‡∏ó‡∏≥/‡∏ú‡∏π‡∏Å DataTables ‡πÄ‡∏õ‡πá‡∏ô baseline (‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÄ‡∏â‡∏û‡∏≤‡∏∞ ‚Äú‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏/‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‚Äù)
- ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏° form builder / report builder / datatable component ‡∏ä‡∏∏‡∏î‡πÉ‡∏´‡∏ç‡πà

### Layer B: Template Integration (Limitless/AdminLTE ‚Äú‡∏ó‡∏±‡πâ‡∏á‡∏ä‡∏∏‡∏î‚Äù)
**‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:** ‡∏ó‡∏≥ layout + components library (card/modal/form/etc) ‡πÅ‡∏•‡∏∞ migrate harness pages ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ template/components ‡∏à‡∏£‡∏¥‡∏á

**Allowed (Layer B):**
- ‡∏ó‡∏≥ `<x-limitless::card>`, `<x-limitless::modal>`, `<x-limitless::form.*>` ‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£
- Theme manager/white-label UI ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô ‚Äúintegration‚Äù ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ feature logic ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô

### Layer C: UX Polish & App Factory
**‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:** UX builders / polish ‡∏ó‡∏µ‡πà‡∏°‡∏±‡∏Å‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö drift ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡πá‡∏ß

**Allowed (Layer C):**
- DataTables integration ‡πÅ‡∏ö‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏û‡πá‡∏Å (per-page) + datatable component ‡∏ä‡∏∏‡∏î‡πÉ‡∏´‡∏ç‡πà
- Form builder UI, report builder UI, advanced builders

### Gate A ‚Üí B (‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏° Layer B)
- [ ] Tenant context + `tenant.selected` middleware ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á
- [ ] RBAC ‡πÅ‡∏ö‡∏ö registry-first (permissions ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢)
- [ ] Minimal audit baseline ‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ô CRUD ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (create/update/delete)
- [ ] Action router ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö (`data-action`)
- [ ] CRUD generator ‡∏≠‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î tenant-safe + permission hooks + audit hooks + workflow-ready
- [ ] UI harness 3‚Äì5 ‡∏´‡∏ô‡πâ‡∏≤ ‚Äú‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‚Äù ‡πÅ‡∏•‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ (tests/seed/fixtures)

### Gate B ‚Üí C (‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏° Layer C)
- [ ] Template integrated ‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö (layout + assets + navigation)
- [ ] Component library (card/modal/form) ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô harness pages
- [ ] ‡∏°‡∏µ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤ per-page assets ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á migrate ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

### Phase ‚Üî Layer (Primary Label)
| Phase | Primary Layer | Note |
|---:|:---:|---|
| 0‚Äì7 | A | Kernel + module contracts + generator + minimal UI harness (plain Bootstrap) |
| 8‚Äì9 | B | ‚Äú‡∏™‡∏ß‡∏° template‚Äù + component library + migrate harness pages ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏ó‡∏≥ UI modules ‡πÅ‡∏£‡∏Å |
| 10‚Äì21 | C | Expansion/Factory/UX polish (‡∏£‡∏ß‡∏° builders + ops-grade kernel services + managers) |

---

## üèóÔ∏è System Architecture

### Modular Structure (Minimal Edition)
```
app/
‚îú‚îÄ‚îÄ Http/
‚îÇ   ‚îú‚îÄ‚îÄ Controllers/          # Traditional Controllers (NOT API)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RoleController.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TenantController.php
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Middleware/           # Custom only
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TenantMiddleware.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RoleMiddleware.php
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Requests/             # Form validation
‚îÇ       ‚îî‚îÄ‚îÄ UserRequest.php
‚îÇ
‚îú‚îÄ‚îÄ Models/                   # Eloquent models
‚îÇ   ‚îú‚îÄ‚îÄ User.php
‚îÇ   ‚îú‚îÄ‚îÄ Role.php
‚îÇ   ‚îú‚îÄ‚îÄ Permission.php
‚îÇ   ‚îî‚îÄ‚îÄ Tenant.php
‚îÇ
‚îú‚îÄ‚îÄ Services/                 # Business logic
‚îÇ   ‚îú‚îÄ‚îÄ TenantService.php
‚îÇ   ‚îî‚îÄ‚îÄ MediaService.php
‚îÇ
‚îî‚îÄ‚îÄ helpers.php              # Global helpers

modules/                      # Feature modules (optional)
‚îú‚îÄ‚îÄ Crud/
‚îú‚îÄ‚îÄ Menu/
‚îî‚îÄ‚îÄ Media/

resources/
‚îú‚îÄ‚îÄ themes/
‚îÇ   ‚îî‚îÄ‚îÄ <theme>/             # Theme folder
‚îÇ       ‚îú‚îÄ‚îÄ layouts/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ app.blade.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ auth.blade.php
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ components/
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ sidebar.blade.php
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ header.blade.php
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ breadcrumb.blade.php
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ footer.blade.php
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ components/      # Reusable UI components (Layer B)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ card.blade.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ datatable.blade.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ form/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input.blade.php
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ select.blade.php
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ textarea.blade.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ modal.blade.php
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ alert.blade.php
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ assets/          # Theme assets
‚îÇ           ‚îú‚îÄ‚îÄ css/
‚îÇ           ‚îú‚îÄ‚îÄ js/
‚îÇ           ‚îî‚îÄ‚îÄ images/
‚îÇ
‚îî‚îÄ‚îÄ views/                   # Application views
    ‚îú‚îÄ‚îÄ dashboard/
    ‚îÇ   ‚îî‚îÄ‚îÄ index.blade.php
    ‚îú‚îÄ‚îÄ users/
    ‚îÇ   ‚îú‚îÄ‚îÄ index.blade.php
    ‚îÇ   ‚îú‚îÄ‚îÄ create.blade.php
    ‚îÇ   ‚îî‚îÄ‚îÄ edit.blade.php
    ‚îî‚îÄ‚îÄ auth/
        ‚îú‚îÄ‚îÄ login.blade.php
        ‚îî‚îÄ‚îÄ register.blade.php

public/
‚îú‚îÄ‚îÄ themes/                  # Public theme assets (local dist) OR symlink to resources/themes/<theme>/assets
‚îî‚îÄ‚îÄ uploads/                 # User uploads

routes/
‚îú‚îÄ‚îÄ web.php                  # All routes here (no API routes)
‚îî‚îÄ‚îÄ auth.php                 # Auth routes
```

---

## üß± Platform Layering: Kernel ‚Üí Modules ‚Üí Apps (Long-term Survival)

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‚Äú‡πÄ‡∏•‡∏∑‡∏≠‡∏Å template‚Äù ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÅ‡∏ï‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö **Application Platform** ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ê‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏≠‡∏õ (‡πÄ‡∏•‡πá‡∏Å ‚Üí ERP/‡∏™‡πÄ‡∏Å‡∏•‡πÉ‡∏´‡∏ç‡πà) ‡πÇ‡∏î‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏¢‡∏Å‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà ‚Äú‡∏ô‡∏¥‡πà‡∏á‚Äù ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà ‚Äú‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ö‡πà‡∏≠‡∏¢‚Äù ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î

### 1) Kernel (‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)
**Kernel = ‡∏™‡∏±‡∏ç‡∏ç‡∏≤ (contracts) + runtime + cross-cutting policies** ‡∏ó‡∏µ‡πà‡∏ó‡∏∏‡∏Å module/app ‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏∂‡πà‡∏á ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö UI ‡∏´‡∏£‡∏∑‡∏≠ theme ‡πÉ‡∏î theme ‡∏´‡∏ô‡∏∂‡πà‡∏á

- Module runtime: module registry/loader, boot order, config merge, migrations/routes/views loading
- Cross-cutting: tenancy context (`tenant_id()`), RBAC contract/naming, i18n hooks, caching policy, error/response conventions
- Theme adapter API: `theme_view`, `theme_asset`, `render_assets` (API ‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏¥‡πà‡∏á ‡πÅ‡∏ï‡πà theme implementation ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏î‡πâ)

**Rule:** Kernel ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á ‚Äúrare + careful‚Äù (‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á breaking changes)

### 2) Modules (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏î‡πâ/‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ)
**Modules = capabilities** ‡πÄ‡∏ä‡πà‡∏ô Menu/Media/Pages/Forms/Email/Crud ‡πÇ‡∏î‡∏¢‡∏ï‡πâ‡∏≠‡∏á **packageable** ‡πÅ‡∏•‡∏∞‡πÅ‡∏¢‡∏Å concerns ‡∏ä‡∏±‡∏î

- ‡∏°‡∏µ routes/migrations/views ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô module ‡πÄ‡∏≠‡∏á
- ‡∏û‡∏π‡∏î‡∏Å‡∏±‡∏ö kernel ‡∏ú‡πà‡∏≤‡∏ô conventions/contracts/events (‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≤‡∏° module ‡∏Å‡∏±‡∏ô‡∏ï‡∏£‡∏á‡πÜ ‡πÅ‡∏ö‡∏ö tight coupling)

### 3) Apps (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)
**Apps = ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö** kernel + modules + config + seed profile + theme choice ‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô ‚Äúproduct/app‚Äù ‡∏à‡∏£‡∏¥‡∏á

- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î module ‡∏ï‡∏≤‡∏° app profile
- ‡πÉ‡∏™‡πà seed data, default menus, default settings ‡∏Ç‡∏≠‡∏á app
- Theme/UI ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á app layer (‡πÉ‡∏ä‡πâ adapter ‡πÄ‡∏î‡∏¥‡∏°)

### What should be stable vs changeable
- **Stable (Kernel):** tenancy/RBAC/i18n contracts, module boot process, naming conventions, theme adapter API
- **Changeable (Modules/Apps):** screens, builders, templates/themes, workflows, vertical business modules

### Kernel Services (Concept) ‚Äî Keep jQuery, Avoid AI Drift
‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏≠ ‚Äú‡πÉ‡∏ä‡πâ jQuery ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°‚Äù ‡πÅ‡∏ï‡πà‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô platform ‡πÅ‡∏ö‡∏ö **Kernel Services** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡πÄ‡∏¢‡∏≠‡∏∞ ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ Cursor/AI vibe-code ‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô

**‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö (Kernel-first):**
- ‡πÇ‡∏°‡∏î‡∏π‡∏•‡πÉ‡∏î ‡πÜ **‡∏´‡πâ‡∏≤‡∏°‡∏ô‡∏¥‡∏¢‡∏≤‡∏°** ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥/‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏Å‡πÇ‡∏ü‡∏•‡∏ß‡πå/‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô/‡∏≠‡∏≠‡∏î‡∏¥‡∏ó ‡πÅ‡∏ö‡∏ö ad-hoc ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡πÑ‡∏£‡πâ‡∏™‡∏±‡∏ç‡∏ç‡∏≤
- ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ú‡πà‡∏≤‡∏ô **Kernel Service contract** ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÄ‡∏™‡∏°‡∏≠ (‡πÄ‡∏û‡∏∑‡πà‡∏≠ consistency + auditability)

**Kernel Services Catalog (‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏∏‡∏Å‡πÅ‡∏≠‡∏õ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô)**

L1 (Platform Core ‚Äî ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô core plan ‡∏ô‡∏µ‡πâ):
- Identity & Tenant: ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ/‡∏ó‡∏µ‡∏°/tenant switch, domain binding
- Auth/SSO Policy: session/token, login policy
- Access Control (RBAC/ABAC): policy ‡∏Å‡∏•‡∏≤‡∏á + permission registry
- Workflow (State Machine): states/transitions/approvals/escalation
- Notification: email/webhook (+ template)
- Audit & Activity: audit log + activity stream
- File/Media: upload + ACL (versioning ‡πÄ‡∏õ‡πá‡∏ô optional)
- Menu/Nav: dynamic menu ‡∏ï‡∏≤‡∏° role/tenant
- I18n: locale dictionary + import/export + fallback
- Settings: system/tenant/app settings
- Job/Queue + Scheduler: ‡∏ß‡∏≤‡∏á contract ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ (‡πÅ‡∏°‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏™‡πÄ‡∏Å‡∏•‡∏™‡∏π‡∏á)

L2 (Ops-Grade Automation ‚Äî ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Phase 13‚Äì21 scope ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô):
- Event Bus (Domain Events)
- Queue/Worker Contracts: retries, idempotency key, DLQ (roadmap)
- Scheduler: per-tenant schedule, timezone-aware, run history
- Webhook Dispatcher: signing, retry, rate-limit, delivery log

L3 (ERP-Grade Kernel ‚Äî ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏Ñ‡∏£‡∏ö‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å ‡πÅ‡∏ï‡πà ‚Äú‡∏™‡∏±‡∏ç‡∏ç‡∏≤‚Äù ‡∏Ñ‡∏ß‡∏£‡∏ñ‡∏π‡∏Å‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ):
- Org/Cost center/Department model
- Approval chains (‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö Workflow)
- Accounting-grade audit (immutable log + correlation id)
- Reporting Service (definitions/datasets/exports)
- Integration Service (connectors/mapping/retries/sync status)

L4 (Platform Scale ‚Äî ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô add-on, ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Phase 13‚Äì21):
- Search/Index (per-tenant indexing)
- Cache strategy (tenant isolation + invalidation)
- Observability (logs/metrics/traces + per-tenant usage)
- DB scale roadmap (partitioning/read replicas/async projection)
- Backups/restore (per-tenant + audit)

### Phase-to-Kernel Services Mapping (No new features; clarify ownership)
‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ ‚ÄúPhase 0‚Äì21‚Äù ‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö Kernel Services ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡πÅ‡∏≠‡∏õ ‡πÉ‡∏´‡πâ‡∏¢‡∏∂‡∏î mapping ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏ô‡∏≥‡∏ó‡∏≤‡∏á:

- Phase 0: Theme Adapter + UI conventions (App layer) ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Kernel contracts
- Phase 1: Auth policy baseline (Kernel: Auth/SSO policy)
- Phase 2: Access Control baseline (Kernel: permission registry + evaluation)
- Phase 4: Settings service baseline (Kernel)
- Phase 5: Identity & Tenant baseline (Kernel: tenant context + domain binding)
- Phase 7: Developer experience (Kernel: generator ‡∏ï‡πâ‡∏≠‡∏á register permissions/menus ‡∏ú‡πà‡∏≤‡∏ô services)
- Phase 8‚Äì12: Module UIs ‡∏ó‡∏µ‡πà ‚Äúconsume Kernel services‚Äù (Menu/Media/Pages/Forms/Email)
- Phase 13‚Äì21: ‡πÄ‡∏ï‡∏¥‡∏° Ops/Advanced (Kernel L2/L4 pieces ‡πÄ‡∏ä‡πà‡∏ô webhooks/activity/search/notifications/i18n/backup)

### (A) Kernel Services Deliverables Matrix (Phase 0‚Äì21, no renumber)
‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡∏ß‡πà‡∏≤ ‚Äú‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á platform kernel‚Äù ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ Cursor/AI ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡πÑ‡∏õ‡∏ó‡∏≥‡∏Ç‡∏≠‡∏á‡∏ã‡πâ‡∏≥‡πÉ‡∏ô‡πÇ‡∏°‡∏î‡∏π‡∏•

| Kernel Service | Contract ‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏¥‡πà‡∏á | Implemented/Planned in Phases (0‚Äì21) |
|---|---|---|
| Identity & Tenant | `tenant_id()`/tenant context, domain binding, tenant switch | Phase 5 (Kernel baseline), Phase 6 (App usage), Phase 13+ (ops/scale hooks) |
| Auth/SSO Policy | session/token/login policy, guard conventions | Phase 1 (baseline), Phase 13+ (advanced policy, tokens/webhooks auth) |
| Access Control (RBAC/ABAC) | permission registry + evaluation API | Phase 2 (baseline), Phase 3/7/8‚Äì12 (module registration & usage), Phase 13+ (ABAC rules if needed) |
| Workflow Service | state machine + approval task model | Phase 13‚Äì21 (planned: kernel L1/L2), modules/app consume later |
| Notification Service | channel+template+delivery logging contract | Phase 12 (template concept), Phase 13‚Äì21 (delivery + webhook/LINE planned) |
| Audit & Activity | audit schema + correlation id + immutable policy (roadmap) | Phase 13‚Äì21 (planned), Phase 8‚Äì12 should call audit hooks when implemented |
| File/Media | upload + ACL + URL contract | Phase 9 (module UI), Phase 13+ (ACL/versioning hardening) |
| Menu/Nav | render contract + filtering + cache | Phase 8 (module UI + theme integration), Phase 13+ (cache/observability) |
| I18n | dictionary import/export + fallback | Phase 13‚Äì21 (planned), MasterMenu already i18n-friendly |
| Settings | get/set + scope (system/tenant/app) | Phase 4 (baseline), Phase 13+ (export/backup) |
| Jobs/Queue/Scheduler | retry/idempotency conventions | Phase 13‚Äì21 (planned), start contracts early |

> Note: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ ‚Äú‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‚Äù ‡πÅ‡∏Ñ‡πà‡∏•‡πá‡∏≠‡∏Å ownership + sequence ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡∏ß‡πà‡∏≤‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÑ‡∏´‡∏ô‡πÄ‡∏õ‡πá‡∏ô Kernel service ‡πÅ‡∏•‡∏∞ Phase ‡πÑ‡∏´‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ï‡∏∞

### (B) Contracts & Conventions (AI Guardrails)
‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ ‚Äú‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏Å‡∏•‡∏≤‡∏á‚Äù ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ kernel service / modules / apps ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ Cursor/AI ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô

**1) Tenant & Data Isolation**
- ‡∏ó‡∏∏‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ `tenant_id` (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô global registry ‡πÄ‡∏ä‡πà‡∏ô permissions ‡πÅ‡∏ö‡∏ö global)
- ‡∏ó‡∏∏‡∏Å query ‡πÉ‡∏ô module ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å tenant scope (`where('tenant_id', tenant_id())`) ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ trait/scope ‡∏Å‡∏•‡∏≤‡∏á

**2) Permission Naming Convention (Registry-first)**
- ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö: `neonex.{domain}.{action}` ‡πÄ‡∏ä‡πà‡∏ô `neonex.menu.manage`, `neonex.users.view`
- ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ï‡πâ‡∏≠‡∏á ‚Äúregister permissions‚Äù ‡∏ï‡∏≠‡∏ô boot/install ‡∏ú‡πà‡∏≤‡∏ô access control registry (‡∏´‡πâ‡∏≤‡∏°‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏ó‡∏µ‡πà)

**3) Routes & UI Naming**
- Admin routes ‡πÉ‡∏ä‡πâ prefix ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß: `/admin` ‡πÅ‡∏•‡∏∞ name prefix `admin.`
- CRUD resource: `admin.{resources}.index|create|store|edit|update|destroy`

**4) Workflow Hook Rule (future-proof)**
- ‡∏ñ‡πâ‡∏≤ resource ‡πÑ‡∏´‡∏ô‡∏°‡∏µ publish/approve/assign ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å workflow service ‡πÄ‡∏™‡∏°‡∏≠ (‡πÑ‡∏°‡πà‡∏ó‡∏≥ state machine ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á)
- ‡∏ó‡∏∏‡∏Å transition ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô audit

**5) Audit Rule (every important action)**
- Create/Update/Delete/Approve/Reject/Assign/Upload/Permission-change ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô audit
- Event name ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö: `{domain}.{verb}` ‡πÄ‡∏ä‡πà‡∏ô `users.created`, `menu.updated`, `media.uploaded`

**6) Notification Template Keys**
- template key ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö `domain.event` ‡πÄ‡∏ä‡πà‡∏ô `auth.reset_password`, `billing.invoice_paid`
- ‡∏´‡πâ‡∏≤‡∏° hardcode subject/body ‡πÉ‡∏ô module; ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡∏ú‡πà‡∏≤‡∏ô notification service + template

**7) jQuery UI Convention (single pattern)**
- ‡∏ó‡∏∏‡∏Å interactive action ‡πÉ‡∏ä‡πâ `data-action="domain.command"` + action router ‡∏Å‡∏•‡∏≤‡∏á (event delegation)
- AJAX ‡πÉ‡∏´‡πâ‡∏ú‡πà‡∏≤‡∏ô wrapper/pattern ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (`$.ajax` + standard error handling)
- Per-page assets: DataTables/Sortable ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ

### Workflow Service (Kernel Contract Draft)
‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡πÅ‡∏≠‡∏õ/‡πÇ‡∏°‡∏î‡∏π‡∏•‡πÉ‡∏ä‡πâ approval/publish/assign ‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÉ‡∏´‡πâ workflow ‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏≤‡∏á‚Äù

**Core tables (contract):**
- `workflow_definitions` (name, version, states, transitions)
- `workflow_instances` (object_type, object_id, current_state)
- `workflow_tasks` (approver, due_date, status)
- `workflow_actions` (approve/reject/assign/escalate) ‚Üí ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô audit

**Hooks/Events (contract):**
- `on_transition`
- `on_task_created`
- `on_task_completed`

### UI Guardrails for Cursor/AI (jQuery-friendly)
‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô AI ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô JS ‡∏Å‡∏£‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢ ‡πÉ‡∏´‡πâ‡∏•‡πá‡∏≠‡∏Å ‚Äú‡∏™‡∏±‡∏ç‡∏ç‡∏≤ UI‚Äù ‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö:

**Action Contract:**
- ‡∏õ‡∏∏‡πà‡∏°/‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ behavior ‡πÉ‡∏ä‡πâ `data-action="domain.command"` ‡πÄ‡∏™‡∏°‡∏≠
- ‡πÉ‡∏™‡πà `data-url`, `data-method`, `data-id`, `data-confirm` ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

**Single Action Router (event delegation):**
```html
<button
    class="btn btn-sm btn-danger"
    data-action="users.delete"
    data-url="/admin/users/123"
    data-method="DELETE"
    data-confirm="Delete this user?"
>Delete</button>
```

```js
// themes/limitless/js/app.js
$(document).on('click', '[data-action]', function (e) {
    e.preventDefault();
    const $el = $(this);
    const action = $el.data('action');
    const url = $el.data('url');
    const method = ($el.data('method') || 'GET').toUpperCase();
    const confirmMsg = $el.data('confirm');

    if (confirmMsg && !window.confirm(confirmMsg)) return;

    // Minimal example: standard AJAX wrapper (keeps behavior consistent)
    if (method !== 'GET') {
        $.ajax({
            url,
            type: method,
            headers: { 'Accept': 'application/json' },
            success: function () { location.reload(); },
            error: function (xhr) { alert(xhr.responseJSON?.message || 'Error'); }
        });
    } else {
        window.location.href = url;
    }
});
```

**Rule:** ‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏´‡∏ô‡∏°‡∏µ interactive ‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ú‡πà‡∏≤‡∏ô action router ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏°‡∏≠ (‡∏•‡∏î pattern drift)

---

## üöÄ [Layer A] [Kernel + App] Phase 0: Platform Skeleton + Minimal UI Shell (0A + 0B) (6-8 hours)

### Objective
Phase 0 ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ ‚Äú‡πÇ‡∏Ñ‡∏£‡∏á‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‚Äù ‡πÉ‡∏´‡πâ‡∏ö‡∏π‡∏ï‡πÑ‡∏î‡πâ + ‡∏ó‡∏≥ UI Shell ‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡πÑ‡∏°‡πà‡∏ó‡∏≥ component library ‡∏´‡∏ô‡∏±‡∏Å ‡πÜ)

> Rule: ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å reusable UI ‡∏´‡∏ô‡∏±‡∏Å ‡πÜ ‡πÉ‡∏ô Phase 0 ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ AI ‡∏à‡∏∞ drift ‡πÄ‡∏≠‡∏≤ logic ‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô controller/view ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢

### 0A: Platform Skeleton (Kernel scaffolding)
- ‡∏ß‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á Kernel ‚Üí Modules ‚Üí Apps ‡πÅ‡∏•‡∏∞ conventions/contract ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô
- ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° registry contracts (RBAC registry / audit hook / action router rule) ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô
- ‡πÉ‡∏´‡πâ module runtime ‚Äú‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ‚Äù (routes/views/migrations/providers) ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö UI

### 0.1: Theme Folder Ready in Git (0.5 hour)

#### Goal
- ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° theme folder + layout partials ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡πÉ‡∏´‡πâ SSR render ‡πÑ‡∏î‡πâ (‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô plain bootstrap ‡∏´‡∏£‡∏∑‡∏≠‡∏ò‡∏µ‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ‡∏Å‡πá‡πÑ‡∏î‡πâ)
- ‡πÄ‡∏Å‡πá‡∏ö assets ‡πÅ‡∏ö‡∏ö **local dist** ‡∏´‡∏£‡∏∑‡∏≠ **CDN-first** ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏¥‡πà‡∏° bundler

#### Required Theme Layout (Minimal UI Shell)
```
resources/themes/<theme>/
‚îú‚îÄ‚îÄ layouts/
‚îÇ   ‚îú‚îÄ‚îÄ app.blade.php
‚îÇ   ‚îú‚îÄ‚îÄ auth.blade.php
‚îÇ   ‚îî‚îÄ‚îÄ components/
‚îÇ       ‚îú‚îÄ‚îÄ sidebar.blade.php
‚îÇ       ‚îú‚îÄ‚îÄ header.blade.php
‚îÇ       ‚îî‚îÄ‚îÄ footer.blade.php

# NOTE: card/modal/form/datatable component library is deferred to Layer B (starts Phase 8)
```

#### Public Assets Strategy (Keep Site Small)
**‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£:** ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á, ‡πÅ‡∏¢‡∏Å plugin ‡πÄ‡∏õ‡πá‡∏ô per-page, ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå minified

Option A (Recommended): **Local minimal dist assets**
```
public/themes/<theme>/
‚îú‚îÄ‚îÄ css/<theme>.min.css
‚îú‚îÄ‚îÄ js/<theme>.min.js
‚îî‚îÄ‚îÄ images/
```

Option B: **CDN-first + local override**
- Bootstrap/jQuery ‡πÉ‡∏ä‡πâ CDN
- Theme custom ‡πÉ‡∏ä‡πâ local (minified)

### 0.2: Convert & Standardize Blade (1.5 hours)

**CI-style View Pattern (legacy reference):**
```php
<!-- CI4: app/Views/themes/limitless/main.php -->
<?= $this->extend('themes/limitless/layout') ?>
<?= $this->section('content') ?>
<div class="content">
    <?= view('components/table', ['data' => $users]) ?>
</div>
<?= $this->endSection() ?>
```

**Laravel Blade (NeonexCMS, minimal UI shell):**
```blade
{{-- Laravel: resources/views/users/index.blade.php --}}
@extends('themes.limitless.layouts.app')

@section('content')
<div class="content">
    <div class="table-responsive">
        <table class="table table-sm table-bordered">
            <thead><tr><th>ID</th><th>Name</th><th>Email</th></tr></thead>
            <tbody>
                @foreach($users as $u)
                    <tr><td>{{ $u->id }}</td><td>{{ $u->name }}</td><td>{{ $u->email }}</td></tr>
                @endforeach
            </tbody>
        </table>
    </div>
</div>
@endsection
```

**Conversion Patterns:**
- `<?= $this->extend() ?>` ‚Üí `@extends()`
- `<?= $this->section() ?>` ‚Üí `@section()` / `@endsection`
- `<?= view() ?>` ‚Üí `<x-component />` or `@include()`
- `<?= esc($var) ?>` ‚Üí `{{ $var }}`
- `<?php foreach() ?>` ‚Üí `@foreach()` / `@endforeach`

### 0.2: Theme System Setup (2 hours)

#### Theme Configuration
```php
// config/theme.php
<?php

return [
    'active' => env('THEME_NAME', 'limitless'),
    
    'themes' => [
        'limitless' => [
            'name' => 'Limitless Admin',
            'version' => '3.0',
            'path' => 'themes/limitless',
            'namespace' => 'limitless',
            
            // Asset optimization
            'assets' => [
                'css' => [
                    // CDN first (faster, no local copy)
                    'cdn' => [
                        'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css',
                    ],
                    // Local only for custom theme
                    'local' => [
                        'themes/limitless/css/limitless.min.css',
                    ]
                ],
                'js' => [
                    'cdn' => [
                        'https://code.jquery.com/jquery-3.6.1.min.js',
                        'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js',
                    ],
                    'local' => [
                        'themes/limitless/js/limitless.min.js',
                        'themes/limitless/js/app.js',  // Our custom code
                    ]
                ]
            ],
            
            // Features
            'features' => [
                'sidebar_collapsible' => true,
                'dark_mode' => true,
                'rtl' => false,
            ]
        ],
    ],
    
    // Performance
    'cache_enabled' => env('THEME_CACHE', true),
    'minify_assets' => env('THEME_MINIFY', true),
];
```

#### Theme Service Provider (Minimal)
```php
// app/Providers/ThemeServiceProvider.php
<?php

namespace App\Providers;

use Illuminate\Support\ServiceProvider;
use Illuminate\Support\Facades\Blade;
use Illuminate\Support\Facades\View;

class ThemeServiceProvider extends ServiceProvider
{
    public function boot(): void
    {
        // Register theme namespace
        $themeName = config('theme.active');
        $themePath = resource_path("themes/{$themeName}");
        
        View::addNamespace($themeName, $themePath);
        
        // Register theme components
        $this->registerComponents($themeName);
        
        // Share theme config to all views
        View::share('theme', config("theme.themes.{$themeName}"));
    }
    
    private function registerComponents(string $theme): void
    {
        // Register Blade components with theme prefix
        // Layer B example: <x-limitless::card />
        Blade::componentNamespace("Resources\\Themes\\{$theme}\\Components", $theme);
    }
}
```

**Register in bootstrap/providers.php:**
```php
return [
    App\Providers\AppServiceProvider::class,
    App\Providers\ThemeServiceProvider::class,  // Add this
];
```

#### Theme Helper Functions
```php
// app/helpers.php

if (!function_exists('theme_asset')) {
    /**
     * Get theme asset URL
     */
    function theme_asset(string $path): string
    {
        $theme = config('theme.active');
        return asset("themes/{$theme}/{$path}");
    }
}

if (!function_exists('theme_view')) {
    /**
     * Get theme view path
     */
    function theme_view(string $view): string
    {
        $theme = config('theme.active');
        return "{$theme}::{$view}";
    }
}

if (!function_exists('render_assets')) {
    /**
     * Render theme assets (CSS/JS)
     */
    function render_assets(string $type = 'css'): string
    {
        $theme = config('theme.active');
        $assets = config("theme.themes.{$theme}.assets.{$type}");
        
        $html = '';
        
        // CDN first (external, fast)
        foreach ($assets['cdn'] ?? [] as $url) {
            $html .= $type === 'css' 
                ? "<link rel=\"stylesheet\" href=\"{$url}\">\n"
                : "<script src=\"{$url}\"></script>\n";
        }
        
        // Local assets
        foreach ($assets['local'] ?? [] as $path) {
            $url = asset($path);
            $html .= $type === 'css'
                ? "<link rel=\"stylesheet\" href=\"{$url}\">\n"
                : "<script src=\"{$url}\"></script>\n";
        }
        
        return $html;
    }
}
```

### 0.3: Base Layout (2 hours)

#### Main Layout
```blade
{{-- resources/themes/limitless/layouts/app.blade.php --}}
<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    
    <title>{{ $title ?? config('app.name') }}</title>
    
    {{-- CSS Assets (CDN + Local) --}}
    {!! render_assets('css') !!}
    
    {{-- Page-specific styles --}}
    @stack('styles')
</head>
<body>
    {{-- Page container --}}
    <div class="page-container">
        
        {{-- Sidebar --}}
        @include('themes.limitless.layouts.components.sidebar')
        
        {{-- Main content --}}
        <div class="page-content">
            
            {{-- Header --}}
            @include('themes.limitless.layouts.components.header')
            
            {{-- Content area --}}
            <div class="content-wrapper">
                
                {{-- Breadcrumb --}}
                @if(isset($breadcrumbs))
                    @include('themes.limitless.layouts.components.breadcrumb')
                @endif
                
                {{-- Flash messages --}}
                @if(session('success'))
                    <div class="alert alert-success alert-dismissible">
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        {{ session('success') }}
                    </div>
                @endif
                
                @if(session('error'))
                    <div class="alert alert-danger alert-dismissible">
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        {{ session('error') }}
                    </div>
                @endif
                
                {{-- Page content --}}
                <div class="content">
                    @yield('content')
                </div>
                
            </div>
            {{-- /content area --}}
            
            {{-- Footer --}}
            @include('themes.limitless.layouts.components.footer')
            
        </div>
        {{-- /main content --}}
        
    </div>
    {{-- /page container --}}
    
    {{-- JS Assets (CDN + Local) --}}
    {!! render_assets('js') !!}
    
    {{-- Global JS Configuration --}}
    <script>
        // CSRF token for all AJAX requests
        $.ajaxSetup({
            headers: {
                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
        });
        
        // Global error handler
        $(document).ajaxError(function(event, jqxhr, settings, thrownError) {
            if (jqxhr.status === 419) {
                alert('Session expired. Please refresh the page.');
            }
        });
        
        // Global success toast
        window.showToast = function(message, type = 'success') {
            const alertClass = type === 'success' ? 'alert-success' : 'alert-danger';
            const alert = $(`
                <div class="alert ${alertClass} alert-dismissible alert-styled-left">
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    ${message}
                </div>
            `);
            
            $('.content').prepend(alert);
            
            setTimeout(() => alert.fadeOut(() => alert.remove()), 3000);
        };
    </script>
    
    {{-- Page-specific scripts --}}
    @stack('scripts')
</body>
</html>
```

#### Sidebar Component
```blade
{{-- resources/themes/limitless/layouts/components/sidebar.blade.php --}}
<div class="sidebar sidebar-dark sidebar-main sidebar-expand-lg">
    
    {{-- Sidebar content --}}
    <div class="sidebar-content">
        
        {{-- User menu --}}
        <div class="sidebar-section">
            <div class="sidebar-user-material">
                <div class="sidebar-user-material-body">
                    <div class="d-flex align-items-center">
                        <a href="{{ route('profile') }}" class="flex-1">
                            <img src="{{ auth()->user()->avatar ?? theme_asset('images/avatar.png') }}" 
                                 class="img-fluid rounded-circle" 
                                 alt="{{ auth()->user()->name }}">
                        </a>
                        <div class="ms-3">
                            <a href="{{ route('profile') }}" class="text-white">
                                {{ auth()->user()->name }}
                            </a>
                            <div class="text-muted">{{ auth()->user()->email }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{-- /user menu --}}
        
        {{-- Navigation --}}
        <div class="sidebar-section">
            <ul class="nav nav-sidebar" data-nav-type="accordion">
                
                {{-- Dashboard --}}
                <li class="nav-item">
                    <a href="{{ route('dashboard') }}" 
                       class="nav-link {{ request()->routeIs('dashboard') ? 'active' : '' }}">
                        <i class="ph-house"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                
                {{-- Users Management --}}
                @can('view_users')
                <li class="nav-item nav-item-submenu {{ request()->is('users*') ? 'nav-item-open' : '' }}">
                    <a href="#" class="nav-link">
                        <i class="ph-users"></i>
                        <span>Users</span>
                    </a>
                    <ul class="nav-group-sub collapse {{ request()->is('users*') ? 'show' : '' }}">
                        <li class="nav-item">
                            <a href="{{ route('users.index') }}" 
                               class="nav-link {{ request()->routeIs('users.index') ? 'active' : '' }}">
                                All Users
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{{ route('users.create') }}" 
                               class="nav-link {{ request()->routeIs('users.create') ? 'active' : '' }}">
                                Add User
                            </a>
                        </li>
                    </ul>
                </li>
                @endcan
                
                {{-- Roles & Permissions --}}
                @can('view_roles')
                <li class="nav-item">
                    <a href="{{ route('roles.index') }}" 
                       class="nav-link {{ request()->routeIs('roles.*') ? 'active' : '' }}">
                        <i class="ph-shield-check"></i>
                        <span>Roles & Permissions</span>
                    </a>
                </li>
                @endcan
                
                {{-- Settings --}}
                @can('view_settings')
                <li class="nav-item">
                    <a href="{{ route('settings.index') }}" 
                       class="nav-link {{ request()->routeIs('settings.*') ? 'active' : '' }}">
                        <i class="ph-gear"></i>
                        <span>Settings</span>
                    </a>
                </li>
                @endcan
                
            </ul>
        </div>
        {{-- /navigation --}}
        
    </div>
    {{-- /sidebar content --}}
    
</div>
```

#### Header Component
```blade
{{-- resources/themes/limitless/layouts/components/header.blade.php --}}
<div class="navbar navbar-expand-lg navbar-static">
    <div class="container-fluid">
        
        {{-- Mobile toggle --}}
        <div class="d-flex d-lg-none me-2">
            <button type="button" class="navbar-toggler sidebar-mobile-main-toggle rounded">
                <i class="ph-list"></i>
            </button>
        </div>
        
        {{-- Logo --}}
        <div class="navbar-brand flex-1 flex-lg-0">
            <a href="{{ route('dashboard') }}" class="d-inline-flex align-items-center">
                <img src="{{ theme_asset('images/logo.png') }}" alt="{{ config('app.name') }}">
            </a>
        </div>
        
        {{-- Right navbar --}}
        <ul class="nav flex-row justify-content-end order-1 order-lg-2">
            
            {{-- User menu --}}
            <li class="nav-item nav-item-dropdown-lg dropdown">
                <a href="#" class="navbar-nav-link align-items-center rounded-pill p-1" data-bs-toggle="dropdown">
                    <div class="status-indicator-container">
                        <img src="{{ auth()->user()->avatar ?? theme_asset('images/avatar.png') }}" 
                             class="w-32px h-32px rounded-pill" 
                             alt="{{ auth()->user()->name }}">
                        <span class="status-indicator bg-success"></span>
                    </div>
                    <span class="d-none d-lg-inline-block mx-lg-2">{{ auth()->user()->name }}</span>
                </a>
                
                <div class="dropdown-menu dropdown-menu-end">
                    <a href="{{ route('profile') }}" class="dropdown-item">
                        <i class="ph-user me-2"></i>
                        My Profile
                    </a>
                    <a href="{{ route('settings.index') }}" class="dropdown-item">
                        <i class="ph-gear me-2"></i>
                        Settings
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="{{ route('logout') }}" 
                       class="dropdown-item"
                       onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
                        <i class="ph-sign-out me-2"></i>
                        Logout
                    </a>
                    <form id="logout-form" action="{{ route('logout') }}" method="POST" class="d-none">
                        @csrf
                    </form>
                </div>
            </li>
            {{-- /user menu --}}
            
        </ul>
        
    </div>
</div>
```

### 0.4: Component Library Spec (Layer B only ‚Äî implement starting Phase 8)

> **Layer A hard gate:** ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á Phase 0 (Layer A) ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ **plain Bootstrap markup** ‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô
> - ‡∏´‡πâ‡∏≤‡∏°‡∏ú‡∏π‡∏Å feature pages ‡∏Å‡∏±‡∏ö `<x-limitless::...>`
> - spec ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏™‡πÄ‡∏õ‡∏Ñ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Layer B‚Äù ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡∏≠‡∏¢‡πà‡∏≤‡∏ó‡∏≥‡πÉ‡∏ô Phase 0‚Äì7)

<details>
<summary><strong>Open Layer B component spec (reference only)</strong></summary>

#### Card Component
```blade
{{-- resources/themes/limitless/components/card.blade.php --}}
@props([
    'title' => null,
    'icon' => null,
    'actions' => null,
    'footer' => null,
    'class' => '',
])

<div class="card {{ $class }}">
    @if($title || $actions)
    <div class="card-header">
        <h5 class="card-title">
            @if($icon)
                <i class="{{ $icon }} me-2"></i>
            @endif
            {{ $title }}
        </h5>
        
        @if($actions)
        <div class="card-actions">
            {!! $actions !!}
        </div>
        @endif
    </div>
    @endif
    
    <div class="card-body">
        {{ $slot }}
    </div>
    
    @if($footer)
    <div class="card-footer">
        {!! $footer !!}
    </div>
    @endif
</div>
```

**Usage Example:**
```blade
<x-limitless::card 
    title="Users List" 
    icon="ph-users"
    :actions="'<a href=\"'.route('users.create').'\" class=\"btn btn-primary\">Add User</a>'">
    
    {{-- Card content --}}
    <p>Content here...</p>
    
</x-limitless::card>
```

#### DataTable Component (Limitless baseline)
```blade
{{-- resources/themes/limitless/components/datatable.blade.php --}}
@props([
    'id' => 'datatable',
    'columns' => [],
    'ajax' => null,
    'data' => null,
    'actions' => true,
    'class' => '',
])

<table id="{{ $id }}" class="table table-bordered table-hover {{ $class }}">
    <thead>
        <tr>
            @foreach($columns as $column)
                <th>{{ $column['label'] }}</th>
            @endforeach
            @if($actions)
                <th class="text-center" style="width: 120px;">Actions</th>
            @endif
        </tr>
    </thead>
    <tbody>
        @if($data)
            @foreach($data as $row)
                <tr data-id="{{ $row->id }}">
                    @foreach($columns as $column)
                        <td>{{ data_get($row, $column['data']) }}</td>
                    @endforeach
                    @if($actions)
                        <td class="text-center">
                            {{ $slot }}
                        </td>
                    @endif
                </tr>
            @endforeach
        @endif
    </tbody>
</table>

@push('scripts')
<script>
$(document).ready(function() {
    @if($ajax)
        // AJAX DataTable
        $('#{{ $id }}').DataTable({
            processing: true,
            serverSide: true,
            ajax: '{{ $ajax }}',
            columns: [
                @foreach($columns as $column)
                    { data: '{{ $column['data'] }}', name: '{{ $column['data'] }}' },
                @endforeach
                @if($actions)
                    { data: 'actions', name: 'actions', orderable: false, searchable: false }
                @endif
            ],
            order: [[0, 'desc']],
            pageLength: 25,
            language: {
                paginate: {
                    previous: '<i class="ph-arrow-left"></i>',
                    next: '<i class="ph-arrow-right"></i>'
                }
            }
        });
    @else
        // Simple DataTable
        $('#{{ $id }}').DataTable({
            pageLength: 25,
            language: {
                paginate: {
                    previous: '<i class="ph-arrow-left"></i>',
                    next: '<i class="ph-arrow-right"></i>'
                }
            }
        });
    @endif
});
</script>
@endpush
```

**Usage Example (Simple):**
```blade
<x-limitless::datatable 
    id="usersTable"
    :columns="[
        ['label' => 'ID', 'data' => 'id'],
        ['label' => 'Name', 'data' => 'name'],
        ['label' => 'Email', 'data' => 'email'],
    ]"
    :data="$users">
    
    {{-- Actions slot --}}
    <a href="{{ route('users.edit', $row->id) }}" class="btn btn-sm btn-primary">Edit</a>
    <button class="btn btn-sm btn-danger delete-btn">Delete</button>
    
</x-limitless::datatable>
```

**Usage Example (AJAX):**
```blade
<x-limitless::datatable 
    id="usersTable"
    :columns="[
        ['label' => 'ID', 'data' => 'id'],
        ['label' => 'Name', 'data' => 'name'],
        ['label' => 'Email', 'data' => 'email'],
    ]"
    ajax="{{ route('users.data') }}" />
```

#### Form Components

**Input Component:**
```blade
{{-- resources/themes/limitless/components/form/input.blade.php --}}
@props([
    'name',
    'label' => null,
    'type' => 'text',
    'value' => '',
    'placeholder' => '',
    'required' => false,
    'readonly' => false,
    'help' => null,
])

<div class="mb-3">
    @if($label)
    <label class="form-label" for="{{ $name }}">
        {{ $label }}
        @if($required) <span class="text-danger">*</span> @endif
    </label>
    @endif
    
    <input 
        type="{{ $type }}"
        id="{{ $name }}"
        name="{{ $name }}"
        class="form-control @error($name) is-invalid @enderror"
        value="{{ old($name, $value) }}"
        placeholder="{{ $placeholder }}"
        {{ $required ? 'required' : '' }}
        {{ $readonly ? 'readonly' : '' }}
        {{ $attributes }}
    >
    
    @error($name)
        <div class="invalid-feedback">{{ $message }}</div>
    @enderror
    
    @if($help)
        <div class="form-text">{{ $help }}</div>
    @endif
</div>
```

**Select Component:**
```blade
{{-- resources/themes/limitless/components/form/select.blade.php --}}
@props([
    'name',
    'label' => null,
    'options' => [],
    'value' => '',
    'placeholder' => 'Select...',
    'required' => false,
    'multiple' => false,
])

<div class="mb-3">
    @if($label)
    <label class="form-label" for="{{ $name }}">
        {{ $label }}
        @if($required) <span class="text-danger">*</span> @endif
    </label>
    @endif
    
    <select 
        id="{{ $name }}"
        name="{{ $name }}{{ $multiple ? '[]' : '' }}"
        class="form-select @error($name) is-invalid @enderror"
        {{ $required ? 'required' : '' }}
        {{ $multiple ? 'multiple' : '' }}
        {{ $attributes }}
    >
        @if(!$multiple && $placeholder)
            <option value="">{{ $placeholder }}</option>
        @endif
        
        @foreach($options as $optValue => $optLabel)
            <option 
                value="{{ $optValue }}" 
                {{ old($name, $value) == $optValue ? 'selected' : '' }}
            >
                {{ $optLabel }}
            </option>
        @endforeach
    </select>
    
    @error($name)
        <div class="invalid-feedback">{{ $message }}</div>
    @enderror
</div>
```

**Textarea Component:**
```blade
{{-- resources/themes/limitless/components/form/textarea.blade.php --}}
@props([
    'name',
    'label' => null,
    'value' => '',
    'rows' => 3,
    'placeholder' => '',
    'required' => false,
])

<div class="mb-3">
    @if($label)
    <label class="form-label" for="{{ $name }}">
        {{ $label }}
        @if($required) <span class="text-danger">*</span> @endif
    </label>
    @endif
    
    <textarea 
        id="{{ $name }}"
        name="{{ $name }}"
        class="form-control @error($name) is-invalid @enderror"
        rows="{{ $rows }}"
        placeholder="{{ $placeholder }}"
        {{ $required ? 'required' : '' }}
        {{ $attributes }}
    >{{ old($name, $value) }}</textarea>
    
    @error($name)
        <div class="invalid-feedback">{{ $message }}</div>
    @enderror
</div>
```

**Form Usage Example:**
```blade
<form method="POST" action="{{ route('users.store') }}">
    @csrf
    
    <x-limitless::form.input 
        name="name" 
        label="Full Name" 
        required 
    />
    
    <x-limitless::form.input 
        name="email" 
        type="email"
        label="Email Address" 
        required 
    />
    
    <x-limitless::form.select 
        name="role_id" 
        label="Role"
        :options="$roles"
        required 
    />
    
    <x-limitless::form.textarea 
        name="bio" 
        label="Biography"
        rows="5" 
    />
    
    <button type="submit" class="btn btn-primary">Save User</button>
</form>
```

#### Modal Component
```blade
{{-- resources/themes/limitless/components/modal.blade.php --}}
@props([
    'id',
    'title' => '',
    'size' => '', // sm, lg, xl
    'footer' => true,
])

<div class="modal fade" id="{{ $id }}" tabindex="-1">
    <div class="modal-dialog {{ $size ? 'modal-'.$size : '' }}">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">{{ $title }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            
            <div class="modal-body">
                {{ $slot }}
            </div>
            
            @if($footer)
            <div class="modal-footer">
                <button type="button" class="btn btn-link" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="{{ $id }}-submit">Save</button>
            </div>
            @endif
        </div>
    </div>
</div>
```

**Modal Usage:**
```blade
{{-- Button to trigger --}}
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addUserModal">
    Add User
</button>

{{-- Modal --}}
<x-limitless::modal id="addUserModal" title="Add New User" size="lg">
    <form id="addUserForm">
        <x-limitless::form.input name="name" label="Name" required />
        <x-limitless::form.input name="email" type="email" label="Email" required />
    </form>
</x-limitless::modal>

@push('scripts')
<script>
$('#addUserModal-submit').click(function() {
    const formData = $('#addUserForm').serialize();
    
    $.post('{{ route('users.store') }}', formData)
        .done(function(response) {
            $('#addUserModal').modal('hide');
            showToast('User added successfully!');
            location.reload();
        })
        .fail(function(xhr) {
            alert('Error: ' + xhr.responseJSON.message);
        });
});
</script>
@endpush
```

</details>

---

## üìö Phase 0 Deliverables

### Objective
Phase 0 must be **UI Shell** + **Platform Skeleton** only.

Goal: get a bootable Kernel/Modules runtime + a minimal theme/layout so we can build Kernel contracts first (tenant/RBAC/audit/workflow) without the AI drifting into view/controller logic.

### ‚úÖ Execution Order Checklist (Phase 0)
- [ ] 0A: Platform Skeleton (Kernel scaffolding + module runtime conventions)
- [ ] 0B: Minimal UI Shell (theme runs: layout + assets + placeholder sidebar)

---

### 0A: Platform Skeleton (Kernel scaffolding)

### Objective
Create the **empty-but-structured** platform runtime: folder conventions, contracts, service providers, and module bootstrapping ‚Äî with minimal/no UI.

### In scope
- [ ] Kernel/Modules structure conventions documented (where contracts/services live)
- [ ] Module runtime boots modules (providers, routes, views, migrations) in a consistent way
- [ ] Central registries are defined as contracts (permission registry, audit/event hooks) even if implementations stay minimal for now
- [ ] ‚ÄúAction Router‚Äù JS convention is established (data-action=...) as a global rule

### Out of scope
- [ ] Any real feature logic (auth/tenant/RBAC/etc.) ‚Äî starts Phase 1+
- [ ] UI component library (cards/forms/modals/datatables) ‚Äî move to Phase 8 (Layer B)
- [ ] Dynamic sidebar/menu rendering ‚Äî starts Phase 8

**Exit criteria (Phase 0A):**
- [ ] App boots with the module loader loading at least 1 module skeleton
- [ ] A module can register routes/views/migrations without touching core folders

### Phase 0A Output
- [ ] Documented conventions + bootstrapping skeleton (Kernel ‚Üí Modules)
- [ ] Contracts stubs exist for later phases to implement

---

### 0B: Minimal UI Shell (theme runs)

### Objective
Make the theme render **one SSR admin page** reliably (assets + layout) so Kernel phases can be tested, without building a full component library.

### In scope
- [ ] Theme assets prepared (local dist OR CDN-first)
- [ ] Theme config + ThemeServiceProvider wired
- [ ] Theme adapter helpers exist: `theme_asset()`, `theme_view()`, `render_assets()` (API only)
- [ ] Base layouts only: `app`, `auth` (thin)
- [ ] Layout partials only: sidebar/header/footer/breadcrumb (placeholder, not DB-driven)
- [ ] Per-page assets loading policy documented (no global heavy plugins)

### Out of scope
- [ ] DataTable component + full DataTables init set ‚Äî move to Phase 8 (Layer C optional)
- [ ] Modal/form/card component library ‚Äî move to Phase 8 (Layer B)
- [ ] Sidebar dynamic render from DB ‚Äî move to Phase 8
- [ ] Theme switching UI ‚Äî Phase 20

**Exit criteria (Phase 0B):**
- [ ] Theme renders a sample admin page via Blade layout (no broken assets)
- [ ] Bootstrap/theme JS plugins load without npm build
- [ ] Placeholder sidebar renders and does not depend on DB/menu services

### Phase 0B Output
- [ ] Minimal UI shell is working (layout + assets + placeholder nav)
- [ ] Theme adapter API is stable for later phases

---

### Deferred from Phase 0 (moved later)
- UI component library (cards/forms/modals) ‚Üí Phase 8 (Layer B)
- Datatable component + DataTables init pack ‚Üí Phase 8
- Sidebar dynamic menu rendering ‚Üí Phase 8

### ‚úÖ Checklist (Phase 0)
- [ ] Theme folder + layout partials created
- [ ] Public theme assets ready (local dist) OR CDN-first strategy applied
- [ ] CI4 views converted to Laravel Blade
- [ ] Theme config created
- [ ] ThemeServiceProvider registered
- [ ] Helper functions added
- [ ] Base layouts created (app, auth)
- [ ] Layout components created (sidebar, header, footer)
- [ ] Assets optimized (CDN first, minified local)

### üìÅ File Structure After Phase 0

```
config/
‚îî‚îÄ‚îÄ theme.php                    ‚úÖ Theme configuration

app/
‚îú‚îÄ‚îÄ Providers/
‚îÇ   ‚îî‚îÄ‚îÄ ThemeServiceProvider.php ‚úÖ Theme service provider
‚îî‚îÄ‚îÄ helpers.php                  ‚úÖ Theme helper functions

resources/
‚îî‚îÄ‚îÄ themes/
    ‚îî‚îÄ‚îÄ limitless/
        ‚îú‚îÄ‚îÄ layouts/
        ‚îÇ   ‚îú‚îÄ‚îÄ app.blade.php           ‚úÖ Main layout
        ‚îÇ   ‚îú‚îÄ‚îÄ auth.blade.php          ‚úÖ Auth layout
        ‚îÇ   ‚îî‚îÄ‚îÄ components/
        ‚îÇ       ‚îú‚îÄ‚îÄ sidebar.blade.php    ‚úÖ Sidebar (placeholder)
        ‚îÇ       ‚îú‚îÄ‚îÄ header.blade.php     ‚úÖ Header
        ‚îÇ       ‚îú‚îÄ‚îÄ breadcrumb.blade.php ‚úÖ Breadcrumb
        ‚îÇ       ‚îî‚îÄ‚îÄ footer.blade.php     ‚úÖ Footer

public/
‚îî‚îÄ‚îÄ themes/
    ‚îî‚îÄ‚îÄ limitless/
        ‚îú‚îÄ‚îÄ css/
        ‚îÇ   ‚îî‚îÄ‚îÄ limitless.min.css       ‚úÖ Theme styles
        ‚îú‚îÄ‚îÄ js/
        ‚îÇ   ‚îú‚îÄ‚îÄ limitless.min.js        ‚úÖ Theme scripts
        ‚îÇ   ‚îî‚îÄ‚îÄ app.js                  ‚úÖ Custom scripts
        ‚îî‚îÄ‚îÄ images/
            ‚îú‚îÄ‚îÄ logo.png                ‚úÖ Logo
            ‚îî‚îÄ‚îÄ avatar.png              ‚úÖ Default avatar
```

### üß™ UI Shell Smoke Test Page

Create a smoke-test page to verify the UI shell works (layout + assets only):

```php
// routes/web.php
Route::get('/_shell', function() {
    return view('shell');
})->name('shell');
```

```blade
{{-- resources/views/shell.blade.php --}}
@extends('themes.limitless.layouts.app')

@section('content')
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header d-flex align-items-center justify-content-between">
                <h6 class="mb-0">UI Shell</h6>
                <span class="badge text-bg-secondary">Phase 0B</span>
            </div>
            <div class="card-body">
                <p class="mb-0">This page validates layouts + assets only (no component library).</p>
            </div>
        </div>
    </div>
    
    {{-- Table Test --}}
    <div class="col-12 mt-3">
        <div class="card">
            <div class="card-header"><h6 class="mb-0">Table (plain)</h6></div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-sm table-bordered">
                        <thead><tr><th>ID</th><th>Name</th><th>Email</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Example</td><td>example@example.com</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    {{-- Form Test --}}
    <div class="col-12 mt-3">
        <div class="card">
            <div class="card-header"><h6 class="mb-0">Form (plain)</h6></div>
            <div class="card-body">
                <div class="mb-3">
                    <label class="form-label">Name</label>
                    <input class="form-control" placeholder="Enter name" />
                </div>
                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input class="form-control" type="email" placeholder="Enter email" />
                </div>
                <div class="mb-3">
                    <label class="form-label">Role</label>
                    <select class="form-select"><option>Admin</option></select>
                </div>
            </div>
        </div>
    </div>
    
    {{-- Modal Test --}}
    <div class="col-12 mt-3">
        <div class="card">
            <div class="card-header"><h6 class="mb-0">Modal (plain)</h6></div>
            <div class="card-body">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#testModal">
                    Open Test Modal
                </button>
            </div>
        </div>

        <div class="modal fade" id="testModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Test Modal</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p class="mb-0">This is a test modal content.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
```

---

## üéØ Next Phases Overview (Core Plan)

## ‚úÖ Phase 1‚Äì6 (Detailed Implementation)

> Goal: ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö ‚Äú‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‚Äù ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà Phase 1‚Äì6 ‡πÇ‡∏î‡∏¢ **‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á npm build**, UI ‡πÉ‡∏ä‡πâ Bootstrap+Limitless, ‡πÅ‡∏•‡∏∞ code pattern ‡∏á‡πà‡∏≤‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Cursor/AI

---

### ‚úÖ Execution Order Checklist (Phase 1‚Äì7)

> ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö ‚Äú‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‚Äù ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ tenant + permission + generator ‡πÄ‡∏î‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÑ‡∏ß

> ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: **‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏¢‡∏∂‡∏î checklist ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å** (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡πÄ‡∏•‡∏Ç Phase ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏á 1‚Üí7 ‡πÄ‡∏™‡∏°‡∏≠) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ ‚Äútenant-first + registry-first + audit-first‚Äù ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏£‡∏¥‡∏á

- [ ] Phase 1: Auth ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö (login/register/logout + auth layout)
- [ ] Phase 5: Tenant resolver ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡πÑ‡∏î‡πâ `tenant_id()` / `app('tenant.id')` + middleware)
- [ ] Phase 4: Settings service tenant-aware (‡∏≠‡πà‡∏≤‡∏ô/‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô + cache + clear cache)
- [ ] Phase 2: RBAC minimal + `permission` middleware (seed role/permission ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥)
- [ ] Phase 3: Users CRUD (tenant + permission guard + list/edit/delete)
- [ ] Phase 6: Dashboard (‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏•‡∏±‡∏á auth+tenant, ‡∏°‡∏µ quick links)
- [ ] Phase 7: CRUD Generator (generate ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô Blade+jQuery, tenant-safe, permission-safe)

**Exit criteria (Phase 1‚Äì7):**
- [ ] ‡πÄ‡∏õ‡∏¥‡∏î `/dashboard` ‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏±‡∏á login ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å tenant
- [ ] ‡πÄ‡∏õ‡∏¥‡∏î `/admin/users` ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥ CRUD ‡πÑ‡∏î‡πâ
- [ ] `php artisan neonex:make:crud ...` ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ index/create/edit ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á `npm build`

## [Layer A] [Kernel] Phase 1: Authentication (No Starter Kit, No npm) (8-12 hours)

### Objective
Deliver working session auth (login/register/logout) with Limitless-styled Blade pages and safe defaults, without using any starter kit or frontend build.

### In scope
- [ ] Login/Register/Logout with session-based auth (no starter kit)
- [ ] Blade views for auth pages using Limitless/Bootstrap
- [ ] Basic validation + session regenerate on login

### Out of scope
- [ ] Password reset, email verification, 2FA (add later if needed)
- [ ] SSO/OAuth/SAML
- [ ] SPA auth flows / token auth for admin UI

### 1.1 Routes
```php
// routes/auth.php

use App\Http\Controllers\Auth\LoginController;
use App\Http\Controllers\Auth\RegisterController;

Route::middleware('guest')->group(function () {
    Route::get('/login', [LoginController::class, 'show'])->name('login');
    Route::post('/login', [LoginController::class, 'store'])->name('login.store');

    Route::get('/register', [RegisterController::class, 'show'])->name('register');
    Route::post('/register', [RegisterController::class, 'store'])->name('register.store');
});

Route::middleware('auth')->group(function () {
    Route::post('/logout', [LoginController::class, 'destroy'])->name('logout');
});
```

### 1.2 Controllers
```php
// app/Http/Controllers/Auth/LoginController.php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class LoginController extends Controller
{
    public function show()
    {
        return view('auth.login');
    }

    public function store(Request $request)
    {
        $credentials = $request->validate([
            'email' => ['required', 'email'],
            'password' => ['required', 'string'],
        ]);

        $remember = (bool) $request->boolean('remember');

        if (!Auth::attempt($credentials, $remember)) {
            return back()
                ->withInput($request->only('email'))
                ->withErrors(['email' => 'Invalid credentials.']);
        }

        $request->session()->regenerate();

        return redirect()->intended(route('dashboard'));
    }

    public function destroy(Request $request)
    {
        Auth::logout();
        $request->session()->invalidate();
        $request->session()->regenerateToken();
        return redirect()->route('login');
    }
}
```

```php
// app/Http/Controllers/Auth/RegisterController.php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use App\Models\User;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Hash;

class RegisterController extends Controller
{
    public function show()
    {
        return view('auth.register');
    }

    public function store(Request $request)
    {
        $validated = $request->validate([
            'name' => ['required', 'string', 'max:255'],
            'email' => ['required', 'email', 'max:255', 'unique:users,email'],
            'password' => ['required', 'string', 'min:8', 'confirmed'],
        ]);

        $user = User::create([
            'name' => $validated['name'],
            'email' => $validated['email'],
            'password' => Hash::make($validated['password']),
        ]);

        Auth::login($user);

        return redirect()->route('dashboard');
    }
}
```

### 1.3 Blade Views (Bootstrap/Limitless)
```blade
{{-- resources/views/auth/login.blade.php --}}
@extends('themes.limitless.layouts.auth')

@section('content')
<div class="card">
    <div class="card-body">
        <h5 class="mb-3">Login</h5>

        <form method="POST" action="{{ route('login.store') }}">
            @csrf

            <div class="mb-3">
                <label class="form-label">Email</label>
                <input class="form-control" name="email" type="email" value="{{ old('email') }}" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Password</label>
                <input class="form-control" name="password" type="password" required>
            </div>

            <div class="d-flex align-items-center justify-content-between mb-3">
                <label class="form-check">
                    <input type="checkbox" class="form-check-input" name="remember" value="1">
                    <span class="form-check-label">Remember me</span>
                </label>
            </div>

            <button class="btn btn-primary w-100" type="submit">Sign in</button>
        </form>
    </div>
</div>
@endsection
```

**Exit criteria (Phase 1):**
- [ ] Login/Register/Logout works; session regenerates on login
- [ ] Auth pages render with Limitless auth layout (assets load)
- [ ] Guests are redirected away from protected routes

### Phase 1 Output
- [ ] Auth routes + controllers + Blade views (no starter kit)
- [ ] Session-based auth working end-to-end

---

## [Layer A] [Kernel] Phase 2: RBAC (Custom Minimal) (8-12 hours)

### Objective
Provide minimal roles/permissions + middleware so modules can be guarded consistently (and so generator output can attach permissions later).

### In scope
- [ ] Minimal tables: roles/permissions + pivots
- [ ] `User::canDo()` (or equivalent) + `permission` middleware
- [ ] Route guarding for at least one module (Users)

### Out of scope
- [ ] Full policy/ability matrix UI (role editor, permission UI)
- [ ] Hierarchical roles, attribute-based access control (ABAC)
- [ ] Field-level permissions

### 2.1 Tables (Minimal)
```php
// database/migrations/xxxx_create_roles_permissions_tables.php

Schema::create('roles', function ($table) {
    $table->id();
    $table->string('name')->unique();
    $table->string('label')->nullable();
    $table->timestamps();
});

Schema::create('permissions', function ($table) {
    $table->id();
    $table->string('name')->unique();
    $table->string('label')->nullable();
    $table->timestamps();
});

Schema::create('role_user', function ($table) {
    $table->foreignId('role_id')->constrained()->cascadeOnDelete();
    $table->foreignId('user_id')->constrained()->cascadeOnDelete();
    $table->primary(['role_id', 'user_id']);
});

Schema::create('permission_role', function ($table) {
    $table->foreignId('permission_id')->constrained()->cascadeOnDelete();
    $table->foreignId('role_id')->constrained()->cascadeOnDelete();
    $table->primary(['permission_id', 'role_id']);
});
```

### 2.2 User Model Helper
```php
// app/Models/User.php

public function roles()
{
    return $this->belongsToMany(Role::class);
}

public function hasRole(string $roleName): bool
{
    return $this->roles()->where('name', $roleName)->exists();
}

public function canDo(string $permissionName): bool
{
    return $this->roles()
        ->whereHas('permissions', fn ($q) => $q->where('name', $permissionName))
        ->exists();
}
```

### 2.3 Middleware
```php
// app/Http/Middleware/PermissionMiddleware.php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;

class PermissionMiddleware
{
    public function handle(Request $request, Closure $next, string $permission)
    {
        $user = $request->user();

        if (!$user || !$user->canDo($permission)) {
            abort(403);
        }

        return $next($request);
    }
}
```

**Route usage:**
```php
Route::middleware(['auth', 'tenant.selected', 'permission:view_users'])->group(function () {
    Route::get('/users', [UserController::class, 'index'])->name('users.index');
});
```

**Exit criteria (Phase 2):**
- [ ] Roles/permissions migrations run cleanly
- [ ] `permission:*` middleware enforces 403 for unauthorized
- [ ] A seeded role can access at least one guarded route

### Phase 2 Output
- [ ] Minimal RBAC tables + pivots
- [ ] `User::canDo()` (or equivalent) + permission middleware wired

---

## [Layer A] [Module] Phase 3: User Management (CRUD baseline, no heavy UI yet) (8-12 hours)

### Objective
Ship the first real CRUD that is **tenant-safe + permission-guarded + audit-first** (no heavy reusable UI yet).

### In scope
- [ ] Users CRUD (index/create/edit/delete) with permission guard
- [ ] Tenant scoping is mandatory (Phase 5 prerequisite)
- [ ] Audit must be recorded on create/update/delete (minimal baseline)
- [ ] Plain SSR list + AJAX delete (no DataTables/component library yet)

### Out of scope
- [ ] Advanced profile features (avatar cropping, audit UI per-user)
- [ ] Bulk import/export (belongs to Phase 16)
- [ ] Complex filtering UI builder

### 3.0 Kernel Contracts Required (Tenant + Audit)
- Phase 5 must already provide `tenant_id()` / tenant context.
- Add a minimal audit baseline **now** so you don‚Äôt retrofit later.

**Minimal audit table (baseline):**
```php
Schema::create('audit_logs', function ($table) {
    $table->id();
    $table->uuid('tenant_id')->nullable()->index();
    $table->unsignedBigInteger('actor_id')->nullable()->index();
    $table->string('event', 120)->index();
    $table->string('subject_type', 120)->nullable();
    $table->string('subject_id', 64)->nullable();
    $table->json('payload')->nullable();
    $table->string('correlation_id', 64)->nullable()->index();
    $table->timestamps();
});
```

**Minimal helper contract (baseline):**
```php
// audit()->record($event, $payload, subject: $model)
// For Phase 3, implementation can be a thin DB insert.
```

### 3.1 Routes
```php
Route::middleware(['auth', 'tenant.selected', 'permission:view_users'])->group(function () {
    Route::get('/users', [UserController::class, 'index'])->name('users.index');
    Route::get('/users/create', [UserController::class, 'create'])->name('users.create');
    Route::post('/users', [UserController::class, 'store'])->name('users.store');
    Route::get('/users/{user}/edit', [UserController::class, 'edit'])->name('users.edit');
    Route::put('/users/{user}', [UserController::class, 'update'])->name('users.update');
    Route::delete('/users/{user}', [UserController::class, 'destroy'])->name('users.destroy');
});
```

### 3.2 Controller (AJAX-friendly)
```php
// app/Http/Controllers/UserController.php

public function index()
{
    $users = User::query()
        ->where('tenant_id', tenant_id())
        ->latest()
        ->limit(500)
        ->get();
    return view('users.index', compact('users'));
}

public function destroy(User $user)
{
    abort_if($user->tenant_id !== tenant_id(), 403);

    $user->delete();

    audit()->record('users.deleted', ['user_id' => $user->id, 'email' => $user->email], subject: $user);
    return response()->json(['ok' => true]);
}
```

### 3.3 View (Plain table + delete)
```blade
{{-- resources/views/users/index.blade.php --}}
@extends('themes.limitless.layouts.app')

@section('content')
<div class="card">
    <div class="card-header d-flex align-items-center justify-content-between">
        <h6 class="mb-0">Users</h6>
        <a href="{{ route('users.create') }}" class="btn btn-primary">Add</a>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-sm table-bordered table-hover">
                <thead><tr><th>ID</th><th>Name</th><th>Email</th><th style="width: 120px;">Actions</th></tr></thead>
                <tbody>
                    @foreach($users as $u)
                        <tr data-id="{{ $u->id }}">
                            <td>{{ $u->id }}</td>
                            <td>{{ $u->name }}</td>
                            <td>{{ $u->email }}</td>
                            <td>
                                <a class="btn btn-sm btn-primary" href="{{ route('users.edit', $u) }}">Edit</a>
                                <a class="btn btn-sm btn-danger js-delete" href="#">Delete</a>
                            </td>
                        </tr>
                    @endforeach
                </tbody>
            </table>
        </div>
    </div>
</div>
@endsection

@push('scripts')
<script>
$(document).on('click', '.js-delete', function(e) {
    e.preventDefault();
    if (!confirm('Delete this user?')) return;

    const id = $(this).closest('tr').data('id');

    $.ajax({
        url: '/users/' + id,
        type: 'DELETE',
        success: function() { location.reload(); },
        error: function(xhr) { alert(xhr.responseJSON?.message || 'Error'); }
    });
});
</script>
@endpush
```

**Exit criteria (Phase 3):**
- [ ] Users list renders and is permission-guarded
- [ ] Create/Edit/Delete works and is tenant-scoped
- [ ] Delete records an audit log row (`users.deleted`)

### Phase 3 Output
- [ ] Users CRUD screens (SSR) + jQuery delete
- [ ] Route-level permission guards applied

---

## [Layer A] [Kernel] Phase 4: Settings System (Tenant-aware) (6-8 hours)

### Objective
Implement a tenant-aware settings store + service that becomes a shared dependency for modules (theme, i18n, notifications, etc.).

### In scope
- [ ] `settings` table contract + tenant-scoped unique key
- [ ] `SettingService::get()` cache-first pattern
- [ ] Cache clear behavior when settings change (minimal)

### Out of scope
- [ ] Full settings admin UI (can be added later)
- [ ] Encrypted secrets/rotation UI
- [ ] Multi-level overrides beyond tenant/app (org/user)

### 4.1 Table
```php
Schema::create('settings', function ($table) {
    $table->id();
    $table->unsignedBigInteger('tenant_id')->nullable()->index();
    $table->string('group')->default('app')->index();
    $table->string('key')->index();
    $table->longText('value')->nullable();
    $table->string('type')->default('string');
    $table->timestamps();

    $table->unique(['tenant_id', 'group', 'key']);
});
```

### 4.2 Access Pattern (Cache first)
```php
// app/Services/SettingService.php

public function get(string $group, string $key, $default = null)
{
    $tenantId = app('tenant.id'); // from tenant middleware
    $cacheKey = "settings:{$tenantId}:{$group}:{$key}";

    return cache()->remember($cacheKey, now()->addMinutes(10), function () use ($tenantId, $group, $key, $default) {
        $row = Setting::query()
            ->where('tenant_id', $tenantId)
            ->where('group', $group)
            ->where('key', $key)
            ->first();

        return $row?->value ?? $default;
    });
}
```

**Exit criteria (Phase 4):**
- [ ] `SettingService::get()` returns correct tenant-scoped values
- [ ] Cache is invalidated on writes (no stale reads)
- [ ] Unique constraint prevents duplicate keys per tenant/group

### Phase 4 Output
- [ ] Tenant-aware settings table + cache-first read pattern
- [ ] Minimal cache clear behavior on updates

---

## [Layer A] [Kernel] Phase 5: Multi-Tenancy (Path/Subdomain/Domain) (10-14 hours)

### Objective
Resolve the current tenant per request and expose a stable tenant context (`tenant_id`) so all module queries can be scoped safely.

### In scope
- [ ] Minimal tables (tenants, tenant_domains, tenant_user)
- [ ] Tenant resolver middleware (domain ‚Üí subdomain ‚Üí path)
- [ ] Expose `tenant_id()` / `app('tenant.id')` for scoping queries

### Out of scope
- [ ] Separate database per tenant / dynamic DB connections
- [ ] Tenant provisioning UI + billing
- [ ] Complex tenant RBAC (org units) beyond basic tenant association

### 5.1 Tables (Minimal)
```php
Schema::create('tenants', function ($table) {
    $table->id();
    $table->string('name');
    $table->string('slug')->unique();
    $table->boolean('is_active')->default(true);
    $table->timestamps();
});

Schema::create('tenant_domains', function ($table) {
    $table->id();
    $table->foreignId('tenant_id')->constrained()->cascadeOnDelete();
    $table->string('domain')->unique();       // example.com
    $table->string('subdomain')->nullable();  // tenant
    $table->string('path')->nullable();       // /t/tenant
    $table->timestamps();
});

Schema::create('tenant_user', function ($table) {
    $table->foreignId('tenant_id')->constrained()->cascadeOnDelete();
    $table->foreignId('user_id')->constrained()->cascadeOnDelete();
    $table->primary(['tenant_id', 'user_id']);
});
```

### 5.2 Tenant Resolver Middleware (Priority: domain ‚Üí subdomain ‚Üí path)
```php
// app/Http/Middleware/TenantMiddleware.php

public function handle($request, $next)
{
    $host = $request->getHost();
    $path = '/' . ltrim($request->path(), '/');

    $tenant = TenantDomain::query()
        ->where('domain', $host)
        ->first();

    if (!$tenant) {
        $parts = explode('.', $host);
        $sub = count($parts) > 2 ? $parts[0] : null;

        if ($sub) {
            $tenant = TenantDomain::query()->where('subdomain', $sub)->first();
        }
    }

    if (!$tenant) {
        // Example convention: /t/{slug}/...
        if (preg_match('#^/t/([^/]+)#', $path, $m)) {
            $tenant = TenantDomain::query()->where('path', '/t/'.$m[1])->first();
        }
    }

    abort_if(!$tenant, 404);

    app()->instance('tenant.id', $tenant->tenant_id);
    app()->instance('tenant.domain', $tenant);

    return $next($request);
}
```

**Exit criteria (Phase 5):**
- [ ] Tenant resolves by domain/subdomain/path in defined priority
- [ ] `tenant_id()` / `app('tenant.id')` is stable per request
- [ ] Tenant middleware blocks requests without a resolved tenant

### Phase 5 Output
- [ ] Tenant tables + resolver middleware
- [ ] Stable tenant context available for module scoping

---

## [Layer A] [App] Phase 6: Dashboard (6-8 hours)

### Objective
Create the first real admin landing page to validate auth + tenant middleware + navigation in SSR (plain Bootstrap; template components come in Layer B).

### In scope
- [ ] Auth + tenant protected dashboard route
- [ ] Basic stats + quick links (SSR)
- [ ] Use plain Bootstrap markup (no component library yet)

### Out of scope
- [ ] Charts/analytics suite
- [ ] Widget marketplace / configurable dashboard
- [ ] Realtime dashboards (websocket)

### 6.1 Route + Controller
```php
Route::middleware(['auth', 'tenant.selected'])->get('/dashboard', [DashboardController::class, 'index'])->name('dashboard');
```

```php
// app/Http/Controllers/DashboardController.php

public function index()
{
    $tenantId = app('tenant.id');

    $stats = [
        'users' => \App\Models\User::count(),
        'tenants' => \App\Models\Tenant::count(),
    ];

    $quickLinks = [
        ['label' => 'Users', 'url' => route('users.index')],
        ['label' => 'Settings', 'url' => route('settings.index')],
    ];

    return view('dashboard.index', compact('stats', 'quickLinks'));
}
```

### 6.2 View
```blade
{{-- resources/views/dashboard/index.blade.php --}}
@extends('themes.limitless.layouts.app')

@section('content')
<div class="row">
    <div class="col-md-3">
        <div class="card">
            <div class="card-header"><h6 class="mb-0">Users</h6></div>
            <div class="card-body"><h3 class="mb-0">{{ $stats['users'] }}</h3></div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="card">
            <div class="card-header"><h6 class="mb-0">Tenants</h6></div>
            <div class="card-body"><h3 class="mb-0">{{ $stats['tenants'] }}</h3></div>
        </div>
    </div>

    <div class="col-12 mt-3">
        <div class="card">
            <div class="card-header"><h6 class="mb-0">Quick Links</h6></div>
            <div class="card-body">
                <div class="d-flex flex-wrap gap-2">
                    @foreach($quickLinks as $link)
                        <a class="btn btn-outline-primary" href="{{ $link['url'] }}">{{ $link['label'] }}</a>
                    @endforeach
                </div>
            </div>
        </div>
    </div>
</div>
@endsection
```

**Exit criteria (Phase 6):**
- [ ] `/dashboard` renders only for authenticated + tenant-selected users
- [ ] Dashboard uses plain Bootstrap markup (component library comes in Layer B)

### Phase 6 Output
- [ ] Dashboard route/controller/view in SSR
- [ ] Quick links validate navigation path for later modules

### [Modules] Phase 7-12: Content Management (32-40 hours)

---

### ‚úÖ Execution Order Checklist (Phase 8‚Äì12)

> ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏ó‡∏≥ content stack ‡∏ó‡∏µ‡πà reuse ‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ (Menu ‚Üí Media ‚Üí Pages ‚Üí Forms ‚Üí Email)

- [ ] Phase 8: Menu Builder (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô theme ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô UI navigation)
- [ ] Phase 9: Media Manager (‡πÉ‡∏´‡πâ Pages/Email/Form ‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ)
- [ ] Phase 10: Page Builder (‡πÉ‡∏ä‡πâ media URLs ‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ slug routing tenant-safe)
- [ ] Phase 11: Forms Builder (‡πÄ‡∏Å‡πá‡∏ö submissions + validate schema)
- [ ] Phase 12: Email Templates (‡∏™‡πà‡∏á test mail + variables; ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å minimal)

**Exit criteria (Phase 8‚Äì12):**
- [ ] Sidebar render ‡∏à‡∏≤‡∏Å DB ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏∏‡∏Å tenant
- [ ] Upload media ‡πÑ‡∏î‡πâ + browse/search/pagination ‡πÑ‡∏î‡πâ
- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á page ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏¥‡∏î public `/p/{slug}` ‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏° tenant
- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á form + submit ‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏µ record ‡πÉ‡∏ô submissions
- [ ] Send test email ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å template key

## [Layer A] [Kernel] Phase 7: CRUD Generator (Blade + jQuery, No npm build) (12-18 hours)

### Objective
‡∏™‡∏£‡πâ‡∏≤‡∏á CRUD Generator ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ Cursor/AI ‚Äú‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‚Äù ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£ generate ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà:
- ‡πÉ‡∏ä‡πâ **Blade + Bootstrap/Limitless + jQuery** ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- **‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ Vue/Inertia** ‡πÅ‡∏•‡∏∞ **‡πÑ‡∏°‡πà‡∏°‡∏µ npm build step**
- ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô **module-first** (‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡∏Ç‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏û‡πá‡∏Å/‡πÇ‡∏°‡∏î‡∏π‡∏•‡πÑ‡∏î‡πâ)

> Note: ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ generator/stubs ‡∏à‡∏≤‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Ñ‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡πâ‡∏ô Vue/Inertia ‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô `--stack=legacy` ‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà **default ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô Blade+jQuery** ‡∏ï‡∏≤‡∏°‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ

### In scope
- [ ] Default output = Blade + jQuery CRUD (no npm)
- [ ] Module-first output (views/migrations/routes in module)
- [ ] Tenant scoping + AJAX-friendly delete + per-page plugin loading
- [ ] Auto-register permission + menu entry (minimal)

### Out of scope
- [ ] Visual CRUD designer UI
- [ ] Generating API/SDK clients, OpenAPI specs
- [ ] Full test suite generator + CI pipeline
- [ ] Multiple frontend stacks (beyond optional legacy flag)

### 7.1 Generator Command Contract
‡πÉ‡∏ä‡πâ command ‡πÄ‡∏î‡∏¥‡∏° (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ breaking ‡∏Å‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤) ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏° option ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° output

```bash
# Default = Blade CRUD (no npm)
php artisan neonex:make:crud Product --schema=stubs/crud/product.json --module=Content

# Optional flags
php artisan neonex:make:crud Product --fields="name:string:required,price:integer:required,is_active:boolean:nullable" --module=Content

# (Optional legacy) if needed
php artisan neonex:make:crud Product --stack=legacy
```

**Required Options (Minimal-first):**
- Default schema format: **JSON**
- YAML support: optional (‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞ dev ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ `symfony/yaml`)

### 7.2 Schema Format (JSON)
```json
{
  "name": "Product",
  "table": "products",
  "route": {
    "prefix": "admin",
    "middleware": ["web", "auth", "tenant.selected"]
  },
  "fields": {
    "name": {"type": "string", "label": "Name", "validation": "required"},
    "price": {"type": "integer", "label": "Price", "validation": "required"},
    "is_active": {"type": "boolean", "label": "Active", "validation": "nullable"}
  }
}
```

### 7.3 Generated Output (Default Laravel Layout)

**When generating a simple CRUD (default):**
```
app/
‚îú‚îÄ‚îÄ Models/Product.php
‚îî‚îÄ‚îÄ Http/
    ‚îú‚îÄ‚îÄ Controllers/Admin/ProductController.php
    ‚îî‚îÄ‚îÄ Requests/Admin/ProductRequest.php
database/migrations/
‚îî‚îÄ‚îÄ xxxx_xx_xx_xxxxxx_create_products_table.php
routes/
‚îî‚îÄ‚îÄ admin.php
resources/views/admin/products/
‚îú‚îÄ‚îÄ index.blade.php
‚îú‚îÄ‚îÄ create.blade.php
‚îî‚îÄ‚îÄ edit.blade.php
```

> ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ ‚Äúmodule loader‚Äù ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Ñ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≤‡∏¢ output ‡πÄ‡∏Ç‡πâ‡∏≤ `modules/<Domain>/*` ‡πÑ‡∏î‡πâ
> ‡πÅ‡∏ï‡πà **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö module framework ‡∏Ç‡∏≠‡∏á repo ‡πÉ‡∏î repo ‡∏´‡∏ô‡∏∂‡πà‡∏á**

### 7.4 Blade Controller Stub (Tenant-aware + Simple)
```php
// app/Http/Controllers/Admin/ProductController.php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use App\Http\Requests\Admin\ProductRequest;
use App\Models\Product;

class ProductController extends Controller
{
    public function index(Request $request)
    {
        $query = Product::query()->where('tenant_id', tenant_id());

        if ($search = $request->string('search')->toString()) {
            $query->where(function ($q) use ($search) {
                $q->where('id', 'like', "%{$search}%")
                  ->orWhere('name', 'like', "%{$search}%");
            });
        }

        // Keep it simple first: server pagination
        $products = $query->latest()->paginate(25)->withQueryString();

        return view('admin.products.index', compact('products'));
    }

    public function create()
    {
        return view('admin.products.create');
    }

    public function store(ProductRequest $request)
    {
        $data = $request->validated();
        $data['tenant_id'] = tenant_id();

        Product::create($data);

        return redirect()->route('admin.products.index')->with('success', 'Created successfully.');
    }

    public function edit(Product $product)
    {
        abort_if($product->tenant_id !== tenant_id(), 403);
        return view('admin.products.edit', compact('product'));
    }

    public function update(ProductRequest $request, Product $product)
    {
        abort_if($product->tenant_id !== tenant_id(), 403);
        $product->update($request->validated());

        return redirect()->route('admin.products.index')->with('success', 'Updated successfully.');
    }

    public function destroy(Product $product)
    {
        abort_if($product->tenant_id !== tenant_id(), 403);
        $product->delete();

        // AJAX-friendly
        if (request()->expectsJson()) {
            return response()->json(['ok' => true]);
        }

        return redirect()->route('admin.products.index')->with('success', 'Deleted successfully.');
    }
}
```

### 7.5 Request Stub (Validation)
```php
// app/Http/Requests/Admin/ProductRequest.php

namespace App\Http\Requests\Admin;

use Illuminate\Foundation\Http\FormRequest;

class ProductRequest extends FormRequest
{
    public function authorize(): bool
    {
        return true; // Phase 7: keep simple; Phase 8 RBAC hook can be added
    }

    public function rules(): array
    {
        return [
            'name' => ['required', 'string', 'max:255'],
            'price' => ['required', 'integer'],
            'is_active' => ['nullable', 'boolean'],
        ];
    }
}
```

### 7.6 Routes Stub (Admin prefix)
```php
// routes/admin.php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\Admin\ProductController;

Route::middleware(['web', 'auth', 'tenant.selected'])
    ->prefix('admin')
    ->name('admin.')
    ->group(function () {
        Route::resource('products', ProductController::class);
    });
```

### 7.7 Views Stub (Index + Create/Edit)

> **Layer A rule:** generator output ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô plain Bootstrap markup ‡∏Å‡πà‡∏≠‡∏ô (‡πÑ‡∏°‡πà‡∏û‡∏∂‡πà‡∏á `<x-limitless::...>`)
> - Layer B ‡∏Ñ‡πà‡∏≠‡∏¢ migrate ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ component library
> - Layer C ‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏° DataTables pack

**Index (plain table; DataTables is Layer C optional):**
```blade
{{-- resources/views/admin/products/index.blade.php --}}
@extends('admin.layouts.app')

@section('content')
<div class="card">
    <div class="card-header d-flex align-items-center justify-content-between">
        <h6 class="mb-0">Products</h6>
        <a href="{{ route('admin.products.create') }}" class="btn btn-primary">Add</a>
    </div>
    <div class="card-body">
    <div class="table-responsive">
        <table class="table table-bordered table-hover" id="productsTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th class="text-center" style="width: 140px;">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach($products as $product)
                <tr data-id="{{ $product->id }}">
                    <td>{{ $product->id }}</td>
                    <td>{{ $product->name }}</td>
                    <td>{{ $product->price }}</td>
                    <td class="text-center">
                        <a class="btn btn-sm btn-primary" href="{{ route('admin.products.edit', $product) }}">Edit</a>
                        <a class="btn btn-sm btn-danger js-delete" href="#">Delete</a>
                    </td>
                </tr>
                @endforeach
            </tbody>
        </table>
    </div>

    <div class="mt-3">
        {{ $products->links() }}
    </div>
</div>
</div>
@endsection

@push('scripts')
<script>
$(function() {
    $(document).on('click', '.js-delete', function(e) {
        e.preventDefault();
        if (!confirm('Delete this item?')) return;

        const id = $(this).closest('tr').data('id');

        $.ajax({
            url: '/admin/products/' + id,
            type: 'DELETE',
            headers: { 'Accept': 'application/json' },
            success: function() { location.reload(); },
            error: function(xhr) { alert(xhr.responseJSON?.message || 'Error'); }
        });
    });
});
</script>
@endpush
```

**Create/Edit (generated from fields):**
```blade
{{-- modules/Content/resources/views/admin/products/create.blade.php --}}
@extends('themes.limitless.layouts.app')

@section('content')
<div class="card">
    <div class="card-header"><h6 class="mb-0">Create Product</h6></div>
    <div class="card-body">
    <form method="POST" action="{{ route('admin.products.store') }}">
        @csrf
        <div class="mb-3">
            <label class="form-label" for="name">Name</label>
            <input class="form-control" id="name" name="name" value="{{ old('name') }}" required>
        </div>
        <div class="mb-3">
            <label class="form-label" for="price">Price</label>
            <input class="form-control" id="price" name="price" type="number" value="{{ old('price') }}" required>
        </div>
        <div class="mb-3">
            <label class="form-label" for="is_active">Active</label>
            <select class="form-select" id="is_active" name="is_active">
                <option value="1">Yes</option>
                <option value="0">No</option>
            </select>
        </div>

        <button class="btn btn-primary" type="submit">Save</button>
        <a class="btn btn-link" href="{{ route('admin.products.index') }}">Cancel</a>
    </form>
</div>
</div>
@endsection
```

### 7.8 Permissions + Menu Auto-Register (Integrate existing modules)

**Permissions naming convention:**
- `neonex.{resource}.view|create|edit|delete`

**Implementation notes (align with current RBAC model):**
- ‡πÉ‡∏ä‡πâ model/service ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö RBAC ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì implement (‡πÄ‡∏ä‡πà‡∏ô `Permission::firstOrCreate(...)`)
- ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô global permission (`tenant_id = null`) ‡πÄ‡∏û‡∏∑‡πà‡∏≠ reuse ‡∏ó‡∏∏‡∏Å tenant

**Menu integration:**
- ‡πÄ‡∏û‡∏¥‡πà‡∏° menu item ‡∏ú‡πà‡∏≤‡∏ô model/service ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏°‡∏ô‡∏π (‡πÄ‡∏ä‡πà‡∏ô `MenuItem::create(...)`) ‡πÅ‡∏ö‡∏ö `type=route`
- `route_name`: `admin.{kebabs}.index`
- `permission`: `neonex.{kebab}.view`

### 7.9 Keep It Small (Performance Rules)
1. **No global DataTables assets**: ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤ index ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ
2. Generated views ‡πÉ‡∏ä‡πâ Bootstrap/theme classes ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡πÑ‡∏°‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á css ‡πÉ‡∏´‡∏°‡πà)
3. JS ‡πÄ‡∏õ‡πá‡∏ô jQuery ‡πÅ‡∏ö‡∏ö‡∏™‡∏±‡πâ‡∏ô‡πÜ (event delegation)
4. ‡πÑ‡∏°‡πà‡∏°‡∏µ Vue/React/Livewire code ‡πÉ‡∏ô generator output

---

**Exit criteria (Phase 7):**
- [ ] Default generator output is Blade + jQuery (no npm build)
- [ ] Generated CRUD runs immediately with tenant scoping
- [ ] Permission + menu integration hooks are generated (minimal)

### Phase 7 Output
- [ ] `php artisan neonex:make:crud Product --stack=blade` ‡∏™‡∏£‡πâ‡∏≤‡∏á CRUD ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- [ ] ‡πÄ‡∏õ‡∏¥‡∏î `/admin/products` ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á `npm build`
- [ ] Create/Edit/Delete ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ
- [ ] Tenant isolation ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞ tenant)
- [ ] Permission + Menu ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## [Layer B] [Module] Phase 8: Menu Builder (Blade + jQuery, No npm build) (10-14 hours)

### 8.0 Layer B Kickoff (Template Integration Gate)

**Phase 8.0 = ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏° Layer B:** ‡πÉ‡∏´‡πâ ‚Äú‡∏™‡∏ß‡∏° template‚Äù ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥ component library + migrate harness pages ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏î‡∏¥‡∏ô‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏°‡∏ô‡∏π

- ‡∏ó‡∏≥‡πÉ‡∏´‡πâ `<x-limitless::...>` component library ‚Äú‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏î‡πâ‚Äù (card/modal/form ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥)
- ‡∏¢‡πâ‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤ harness ‡∏´‡∏•‡∏±‡∏Å 3‚Äì5 ‡∏´‡∏ô‡πâ‡∏≤ (‡πÄ‡∏ä‡πà‡∏ô `/dashboard`, `/users`, `/settings`) ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ component library
- ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤ per-page assets ‡πÅ‡∏•‡∏∞ action router ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°

### Objective
‡∏ó‡∏≥‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡πâ:
- Render ‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô theme (sidebar/header/footer) ‡πÅ‡∏ö‡∏ö tenant-aware
- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡πÉ‡∏ô Admin (CRUD + reorder + nested)
- ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ Inertia/Vue/PrimeVue (‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢ Blade + jQuery)

> Phase 8 ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ Menu module ‡πÅ‡∏ö‡∏ö Blade SSR‚Äù ‡πÅ‡∏•‡∏∞ ‚Äú‡∏ó‡∏≥ partial render ‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡πâ theme ‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á‚Äù ‡πÇ‡∏î‡∏¢‡∏¢‡∏∂‡∏î Master Menu ‡πÄ‡∏õ‡πá‡∏ô default

### In scope
- [ ] Theme renders menu tree from DB (tenant-aware)
- [ ] Admin builder UI in Blade (CRUD + reorder minimal)
- [ ] Reorder with minimal vendor (or button up/down)

### Out of scope
- [ ] Complex permission rule editor per item (beyond existing role constraints)
- [ ] Multi-menu placement engine with conditions/rules DSL
- [ ] Full drag-drop page layout designer

### 8.1 Data Source Policy (Keep Small)
‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ **Master Menu ‡πÄ‡∏õ‡πá‡∏ô default** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö role ‡πÅ‡∏•‡∏∞ field ‡πÅ‡∏ö‡∏ö translatable JSON ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß

- Groups: `master_group_menu`
- Items: `master_menu` (`type=link|module|seperator`, nested ‡∏î‡πâ‡∏ß‡∏¢ `parents`, ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏î‡πâ‡∏ß‡∏¢ `sortid`, ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏î‡πâ‡∏ß‡∏¢ `role[]`)

### 8.2 Theme Integration: Dynamic Sidebar

**Sidebar calls service**
```blade
{{-- resources/themes/<theme>/layouts/components/sidebar.blade.php --}}
@php
    $menuTree = app(\App\Contracts\Menu\MenuServiceInterface::class)->getMasterMenu('sidebar');
@endphp

<ul class="nav nav-sidebar" data-nav-type="accordion">
    @include('menu::partials.sidebar-tree', ['items' => $menuTree])
</ul>
```

**Recursive partial**
```blade
{{-- modules/Menu/resources/views/partials/sidebar-tree.blade.php (example location) --}}
@foreach($items as $item)
    @if(($item['type'] ?? null) === 'divider')
        <li class="nav-item-header">
            <div class="text-uppercase fs-sm lh-sm opacity-50">{{ $item['title'] ?? '' }}</div>
        </li>
        @continue
    @endif

    @php
        $children = $item['children'] ?? [];
        $hasChildren = !empty($children);
        $url = '#';
        if (($item['type'] ?? null) === 'url' && !empty($item['url'])) $url = $item['url'];
        if (($item['type'] ?? null) === 'route' && !empty($item['route_name'])) {
            try { $url = route($item['route_name']); } catch (\Throwable) { $url = '#'; }
        }
    @endphp

    <li class="nav-item {{ $hasChildren ? 'nav-item-submenu' : '' }}">
        <a class="nav-link" href="{{ $url }}">
            @if(!empty($item['icon'])) <i class="{{ $item['icon'] }}"></i> @endif
            <span>{{ $item['title'] ?? '' }}</span>
        </a>

        @if($hasChildren)
            <ul class="nav-group-sub collapse">
                @include('menu::partials.sidebar-tree', ['items' => $children])
            </ul>
        @endif
    </li>
@endforeach
```

### 8.3 Admin Builder UI (Blade)
**Route:** `/admin/menus` (‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: `menu.index`)

**Controller behavior (Phase 8):**
- ‡πÉ‡∏ä‡πâ Blade SSR: `return view('menu::builder.index', ...)`
- ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ Inertia/Vue ‡πÉ‡∏ô flow ‡∏ô‡∏µ‡πâ
- Endpoints ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:
    - Groups: `menu.master.groups.*`
    - Items: `menu.master.items.*`

**Minimal UI layout:**
- ‡∏ã‡πâ‡∏≤‡∏¢: list groups + create/edit/delete
- ‡∏Å‡∏•‡∏≤‡∏á: list items ‡∏Ç‡∏≠‡∏á group (nested)
- ‡∏Ç‡∏ß‡∏≤: form create/edit item

### 8.4 Reorder (Nested) Without Build
‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤ builder ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (per-page assets) ‡πÅ‡∏•‡πâ‡∏ß POST ‡πÑ‡∏õ `menu.master.items.reorder`

Option A: **SortableJS** (vanilla, small, no build)
```html
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js"></script>
```

Option B: **No extra vendor** (‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô/‡∏•‡∏á + ‡∏¢‡πâ‡∏≤‡∏¢ parent) ‡πÉ‡∏ä‡πâ `updateMasterItem` ‡∏î‡πâ‡∏ß‡∏¢ `insert_before_id/insert_after_id`

**Exit criteria (Phase 8):**
- [ ] Theme renders sidebar menu from DB (tenant-aware)
- [ ] Admin menu builder is Blade SSR (no Inertia)
- [ ] Reorder persists and cache invalidation works

### Phase 8 Output
- [ ] Sidebar render ‡∏à‡∏≤‡∏Å DB ‡πÑ‡∏î‡πâ (tenant-aware)
- [ ] Admin `/admin/menus` ‡πÄ‡∏õ‡πá‡∏ô Blade UI
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö item ‡πÅ‡∏•‡∏∞ reorder ‡πÑ‡∏î‡πâ
- [ ] Cache ‡∏ñ‡∏π‡∏Å clear ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏°‡∏ô‡∏π

---

## [Layer B] [Module] Phase 9: Media Manager (Uploads + Library) (12-16 hours)

### Objective
‡∏ó‡∏≥ Media Library ‡πÅ‡∏ö‡∏ö ‚Äú‡∏û‡∏≠‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á‚Äù ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin:
- Upload ‡∏£‡∏π‡∏õ/‡πÑ‡∏ü‡∏•‡πå
- Browse + Search + Pagination
- Copy URL/Path ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Page Builder/Email Templates
- ‡∏™‡∏£‡πâ‡∏≤‡∏á thumbnail ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ (optional) ‡∏î‡πâ‡∏ß‡∏¢ `intervention/image`

### In scope
- [ ] Upload endpoint + DB record (tenant_id scoped)
- [ ] Browse/search/pagination UI (SSR + small jQuery)
- [ ] Copy URL button + basic preview

### Out of scope
- [ ] Video transcoding, document OCR, CDN pipeline
- [ ] Fine-grained folder permissions + sharing
- [ ] Antivirus scanning pipeline

### 9.1 Module Skeleton
```
modules/Media/
‚îú‚îÄ‚îÄ Models/MediaFile.php
‚îú‚îÄ‚îÄ Http/Controllers/Admin/MediaController.php
‚îú‚îÄ‚îÄ database/migrations/
‚îú‚îÄ‚îÄ routes/admin.php
‚îî‚îÄ‚îÄ resources/views/admin/media/
    ‚îú‚îÄ‚îÄ index.blade.php
    ‚îî‚îÄ‚îÄ _upload_form.blade.php
```

### 9.2 Minimal Table Design
```php
Schema::create('media_files', function (Blueprint $table) {
    $table->id();
    $table->uuid('tenant_id')->index();
    $table->string('disk', 50)->default('public');
    $table->string('path', 500);
    $table->string('filename', 255);
    $table->string('mime', 100)->nullable();
    $table->unsignedBigInteger('size')->default(0);
    $table->unsignedInteger('width')->nullable();
    $table->unsignedInteger('height')->nullable();
    $table->json('meta')->nullable();
    $table->unsignedBigInteger('created_by')->nullable();
    $table->timestamps();
    $table->index(['tenant_id', 'filename']);
});
```

### 9.3 Upload Endpoint (AJAX)
- `POST /admin/media/upload` (multipart)
- Response: `{ id, url, filename, mime, size }`

### 9.4 Browse UI (Blade + jQuery)
- ‡πÉ‡∏ä‡πâ grid cards + pagination (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ JS ‡πÄ‡∏¢‡∏≠‡∏∞)
- ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ preview modal ‡∏Ñ‡πà‡∏≠‡∏¢‡πÉ‡∏ä‡πâ Bootstrap modal (‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß)

**Exit criteria (Phase 9):**
- [ ] Upload stores file + DB row scoped by tenant_id
- [ ] Browse list works with search + pagination
- [ ] Copy URL produces a usable URL/path

### Phase 9 Output
- [ ] Upload ‡πÑ‡∏î‡πâ ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å DB ‡∏û‡∏£‡πâ‡∏≠‡∏° tenant_id
- [ ] List/Search/Pagination ‡πÑ‡∏î‡πâ
- [ ] Copy URL ‡πÑ‡∏î‡πâ (button)

---

## [Layer C] [Module] Phase 10: Page Builder (Simple) (10-14 hours)

### Objective
‡∏ó‡∏≥‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏à‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î:
- ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç page
- slug routing
- publish/unpublish
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö content ‡πÄ‡∏õ‡πá‡∏ô HTML (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å textarea)

### In scope
- [ ] Pages CRUD + slug routing + publish/unpublish
- [ ] Tenant-safe unique slug + public render endpoint
- [ ] Start with textarea HTML (no heavy editor)

### Out of scope
- [ ] Drag-drop block editor / component marketplace
- [ ] Versioning + approvals workflow
- [ ] Advanced SEO suite (sitemap, schema generator)

### 10.1 Module Skeleton
```
modules/Pages/
‚îú‚îÄ‚îÄ Models/Page.php
‚îú‚îÄ‚îÄ Http/Controllers/Admin/PageController.php
‚îú‚îÄ‚îÄ Http/Controllers/Public/PageRenderController.php
‚îú‚îÄ‚îÄ database/migrations/
‚îú‚îÄ‚îÄ routes/admin.php
‚îú‚îÄ‚îÄ routes/web.php
‚îî‚îÄ‚îÄ resources/views/
    ‚îú‚îÄ‚îÄ admin/pages/index.blade.php
    ‚îú‚îÄ‚îÄ admin/pages/form.blade.php
    ‚îî‚îÄ‚îÄ public/page.blade.php
```

### 10.2 Minimal Data Model
```php
Schema::create('pages', function (Blueprint $table) {
    $table->id();
    $table->uuid('tenant_id')->index();
    $table->string('title', 255);
    $table->string('slug', 255)->index();
    $table->longText('content_html')->nullable();
    $table->boolean('is_published')->default(false);
    $table->json('meta')->nullable();
    $table->timestamps();
    $table->unique(['tenant_id', 'slug']);
});
```

### 10.3 Rendering Strategy (No magic)
- Public route: `/p/{slug}` (‡∏•‡∏î‡∏ä‡∏ô‡∏Å‡∏±‡∏ö route ‡∏≠‡∏∑‡πà‡∏ô)
- Render view: `pages::public.page`

**Exit criteria (Phase 10):**
- [ ] Admin can create/edit pages and toggle publish
- [ ] Public render route resolves by tenant + slug
- [ ] Slug uniqueness enforced per tenant

### Phase 10 Output
- [ ] CRUD pages ‡πÉ‡∏ô admin ‡πÑ‡∏î‡πâ
- [ ] ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ public `/p/{slug}` ‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏° tenant

---

## [Layer C] [Module] Phase 11: Forms Builder (JSON-first, Simple) (10-14 hours)

### Objective
‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å ‚ÄúJSON schema editor‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏•‡∏∞ vendor ‡∏ô‡πâ‡∏≠‡∏¢:
- ‡∏™‡∏£‡πâ‡∏≤‡∏á form definition (fields, validation, labels)
- generate public endpoint ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö submit
- ‡πÄ‡∏Å‡πá‡∏ö submissions ‡πÉ‡∏ô DB

### In scope
- [ ] Form definition table + submissions table
- [ ] Admin edits JSON schema (textarea) + validate JSON
- [ ] Public submit endpoint saves payload

### Out of scope
- [ ] Visual form designer
- [ ] Multi-step forms + conditional logic builder
- [ ] Payment integrations

### 11.1 Minimal Schema Example
```json
{
  "fields": [
    {"name": "full_name", "type": "text", "label": "Full Name", "rules": "required|max:255"},
    {"name": "email", "type": "email", "label": "Email", "rules": "required|email"},
    {"name": "message", "type": "textarea", "label": "Message", "rules": "required"}
  ]
}
```

### 11.2 Tables
- `forms` (tenant_id, name, slug, schema_json, settings)
- `form_submissions` (form_id, payload_json, user_id, ip, user_agent)

**Exit criteria (Phase 11):**
- [ ] Admin can save valid JSON schema (reject invalid JSON)
- [ ] Public submit endpoint stores a submission row
- [ ] Submissions are tenant-safe

### Phase 11 Output
- [ ] Admin ‡πÅ‡∏Å‡πâ schema ‡πÑ‡∏î‡πâ (textarea JSON + validate)
- [ ] Public submit endpoint ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡πá‡∏ö submissions

---

## [Layer C] [Module] Phase 12: Email Templates (10-14 hours)

### Objective
‡∏ó‡∏≥‡∏£‡∏∞‡∏ö‡∏ö email template ‡∏ó‡∏µ‡πà tenant ‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ:
- subject/body ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏° template key
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö variables
- ‡∏™‡πà‡∏á test email ‡πÑ‡∏î‡πâ

### In scope
- [ ] Templates table + CRUD admin UI (minimal)
- [ ] Variables substitution contract + send test email
- [ ] Use existing Laravel Mail (no SPA)

### Out of scope
- [ ] Drag-drop email builder
- [ ] Full campaign/marketing automation
- [ ] Multi-provider routing + deliverability analytics

### 12.1 Tables
`email_templates`:
- tenant_id
- key (‡πÄ‡∏ä‡πà‡∏ô `welcome`, `reset_password`, `invoice_paid`)
- subject
- body_html / body_text
- variables (json)
- is_active

### 12.2 Sending Service (Pattern)
```php
// Pseudo
MailTemplateService::send(
  tenantId: tenant_id(),
  key: 'welcome',
  to: $user->email,
  data: ['user' => $user]
);
```

**Exit criteria (Phase 12):**
- [ ] Admin can create/update template by key (tenant-scoped)
- [ ] Variables substitution works for a sample template
- [ ] Test send works and failures are visible

### Phase 12 Output
- [ ] Admin CRUD templates ‡πÑ‡∏î‡πâ
- [ ] Preview + Send test email ‡πÑ‡∏î‡πâ

---

### [Kernel + Modules] Phase 13-21: Advanced Features (40-56 hours)
Phase 13‚Äì21 ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡πÉ‡∏´‡πâ platform ‚Äú‡πÄ‡∏î‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏ö‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏≠‡∏õ‚Äù ‡∏î‡πâ‡∏ß‡∏¢ **Kernel Ops + Contracts** (L2/L4) ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏´‡∏•‡∏±‡∏Å no-build + minimal vendor

> Rule: ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ú‡πà‡∏≤‡∏ô Kernel services/conventions (audit, notification, webhooks, permissions) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î drift

---

### ‚úÖ Execution Order Checklist (Phase 13‚Äì21)

> ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏ó‡∏≥‡πÅ‡∏Å‡∏ô ‚ÄúOps-grade contracts‚Äù ‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î feature ‡∏ó‡∏µ‡πà consume contracts

- [ ] Phase 13: Audit & Activity (‡∏ó‡∏∏‡∏Å phase ‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á audit)
- [ ] Phase 15: Domain Events baseline (‡πÉ‡∏´‡πâ‡πÇ‡∏°‡∏î‡∏π‡∏• emit ‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ dispatch)
- [ ] Phase 14: Webhook Dispatcher (consume events + audit)
- [ ] Phase 18: Notifications + Queue contracts (consume events + audit)
- [ ] Phase 16: Exports (‡∏≠‡∏≤‡∏®‡∏±‡∏¢ audit + permission)
- [ ] Phase 17: Search (‡∏≠‡∏≤‡∏®‡∏±‡∏¢ tenant scoping + DB indexes)
- [ ] Phase 19: I18n Dictionary (‡∏ó‡∏≥‡∏Å‡πà‡∏≠‡∏ô Theme Manager ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏∑‡πà‡∏≠ theme/labels ‡∏´‡∏•‡∏≤‡∏¢‡∏†‡∏≤‡∏©‡∏≤)
- [ ] Phase 20: Theme Manager (consume settings + theme adapter)
- [ ] Phase 21: Backup/Restore (consume audit + scheduler/queue optional)

**Exit criteria (Phase 13‚Äì21):**
- [ ] ‡∏ó‡∏∏‡∏Å action ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏µ audit event (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡πÉ‡∏ô Users/Menu/Media/Pages)
- [ ] ‡∏°‡∏µ webhook deliveries + retry ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö signature ‡πÑ‡∏î‡πâ
- [ ] ‡∏°‡∏µ notifications delivery log + test send
- [ ] ‡∏°‡∏µ export CSV ‡πÅ‡∏•‡∏∞ global search endpoint ‡∏ó‡∏µ‡πà tenant-safe
- [ ] i18n import/export ‡πÑ‡∏î‡πâ ‡πÅ‡∏•‡∏∞ theme switch (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢ theme)
- [ ] backup history + command run ‡πÑ‡∏î‡πâ

## [Layer C] [Kernel] Phase 13: Audit & Activity Service (8-12 hours)

### Objective
‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å action ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‚Äú‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ‚Äù ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏∏‡∏Å‡πÇ‡∏°‡∏î‡∏π‡∏• (Kernel service)

### In scope
- [ ] ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `audit_logs` + `activity_stream` ‡∏ï‡∏≤‡∏° contract
- [ ] `AuditService` + helper `audit()` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡πÇ‡∏°‡∏î‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- [ ] Admin list page ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ (SSR + pagination) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö audit logs

### Out of scope
- [ ] UI ‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á (filter builder, export audit, realtime stream)
- [ ] Distributed tracing/observability (‡πÄ‡∏õ‡πá‡∏ô add-on/enterprise)
- [ ] Policy ‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö field-level audit masking

### 13.1 Minimal Tables (Migration Snippet)
```php
// database/migrations/xxxx_xx_xx_xxxxxx_create_audit_activity_tables.php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration {
    public function up(): void
    {
        Schema::create('audit_logs', function (Blueprint $table) {
            $table->id();
            $table->uuid('tenant_id')->nullable()->index();
            $table->unsignedBigInteger('actor_id')->nullable()->index();
            $table->string('event', 100)->index(); // users.created, menu.updated
            $table->string('subject_type', 150)->nullable();
            $table->string('subject_id', 64)->nullable();
            $table->string('correlation_id', 64)->nullable()->index();
            $table->json('context')->nullable();
            $table->ipAddress('ip')->nullable();
            $table->string('user_agent', 255)->nullable();
            $table->timestamps();
            $table->index(['tenant_id', 'event']);
        });

        Schema::create('activity_stream', function (Blueprint $table) {
            $table->id();
            $table->uuid('tenant_id')->nullable()->index();
            $table->unsignedBigInteger('actor_id')->nullable()->index();
            $table->string('message', 255);
            $table->string('event', 100)->nullable()->index();
            $table->json('meta')->nullable();
            $table->timestamps();
        });
    }
};
```

### 13.2 Kernel Service (Implementation Snippet)
```php
// app/Services/AuditService.php

namespace App\Services;

use Illuminate\Http\Request;
use Illuminate\Support\Str;
use Illuminate\Support\Facades\DB;

class AuditService
{
    public function record(string $event, array $context = [], $subject = null, ?string $correlationId = null): void
    {
        /** @var Request $request */
        $request = request();

        $tenantId = function_exists('tenant_id') ? tenant_id() : (app()->bound('tenant.id') ? app('tenant.id') : null);
        $actorId = auth()->id();

        $subjectType = $subject ? get_class($subject) : null;
        $subjectId = $subject ? (string) ($subject->getKey() ?? null) : null;

        $cid = $correlationId
            ?? $request->header('X-Correlation-Id')
            ?? (string) Str::uuid();

        DB::table('audit_logs')->insert([
            'tenant_id' => $tenantId,
            'actor_id' => $actorId,
            'event' => $event,
            'subject_type' => $subjectType,
            'subject_id' => $subjectId,
            'correlation_id' => $cid,
            'context' => json_encode($context, JSON_UNESCAPED_UNICODE),
            'ip' => $request->ip(),
            'user_agent' => substr((string) $request->userAgent(), 0, 255),
            'created_at' => now(),
            'updated_at' => now(),
        ]);

        // Optional: also push to activity stream (keep minimal message)
        if (!empty($context['message'])) {
            DB::table('activity_stream')->insert([
                'tenant_id' => $tenantId,
                'actor_id' => $actorId,
                'message' => (string) $context['message'],
                'event' => $event,
                'meta' => json_encode($context, JSON_UNESCAPED_UNICODE),
                'created_at' => now(),
                'updated_at' => now(),
            ]);
        }
    }
}
```

**Helper (optional, keeps controllers tiny):**
```php
// app/helpers.php

use App\Services\AuditService;

function audit(): AuditService
{
    return app(AuditService::class);
}
```

### 13.3 Admin UI Snippets (Blade + jQuery)

**Routes:**
```php
// routes/web.php

use App\Http\Controllers\Admin\AuditLogController;

Route::middleware(['web', 'auth', 'tenant.selected'])
    ->prefix('admin')
    ->name('admin.')
    ->group(function () {
        Route::get('audit-logs', [AuditLogController::class, 'index'])->name('audit-logs.index');
    });
```

**Controller:**
```php
// app/Http/Controllers/Admin/AuditLogController.php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\DB;

class AuditLogController extends Controller
{
    public function index(Request $request)
    {
        $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');

        $q = DB::table('audit_logs')->where('tenant_id', $tenantId);

        if ($event = $request->string('event')->toString()) {
            $q->where('event', $event);
        }

        $rows = $q->orderByDesc('id')->paginate(50)->withQueryString();

        return view('admin.audit-logs.index', compact('rows'));
    }
}
```

**View:**
```blade
{{-- resources/views/admin/audit-logs/index.blade.php --}}
@extends('themes.limitless.layouts.app')

@section('content')
<div class="card">
    <div class="card-header"><h6 class="mb-0">Audit Logs</h6></div>
    <div class="card-body">
        <form class="row g-2 mb-3" method="GET" action="{{ route('admin.audit-logs.index') }}">
            <div class="col-md-4">
                <input class="form-control" name="event" value="{{ request('event') }}" placeholder="event ‡πÄ‡∏ä‡πà‡∏ô users.created">
            </div>
            <div class="col-md-2">
                <button class="btn btn-primary" type="submit">Filter</button>
            </div>
        </form>

        <div class="table-responsive">
            <table class="table table-sm table-hover">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Time</th>
                        <th>Actor</th>
                        <th>Event</th>
                        <th>Subject</th>
                        <th>Correlation</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach($rows as $r)
                    <tr>
                        <td>{{ $r->id }}</td>
                        <td>{{ $r->created_at }}</td>
                        <td>{{ $r->actor_id }}</td>
                        <td><code>{{ $r->event }}</code></td>
                        <td>{{ $r->subject_type }}#{{ $r->subject_id }}</td>
                        <td><code>{{ $r->correlation_id }}</code></td>
                    </tr>
                    @endforeach
                </tbody>
            </table>
        </div>

        <div class="mt-3">{{ $rows->links() }}</div>
    </div>
</div>
@endsection
```

### 13.4 Usage Convention (Controller snippet)
```php
// Example usage inside any controller action
audit()->record('users.created', [
    'message' => 'Created user',
    'email' => $user->email,
], subject: $user);
```

**Exit criteria (Phase 13):**
- [ ] At least one module action records an audit row
- [ ] Admin audit list renders with pagination
- [ ] Correlation id is present/usable (even if basic)

### Phase 13 Output
- [ ] ‡∏°‡∏µ `audit_logs` + admin list page
- [ ] ‡∏ó‡∏∏‡∏Å‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `audit()->record()` ‡πÑ‡∏î‡πâ

---

## [Layer C] [Kernel] Phase 14: Webhook Dispatcher (8-10 hours)

### Objective
‡∏ó‡∏≥ ‚Äú‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‚Äù ‡πÑ‡∏õ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß: signing, retry, delivery log (Kernel service)

### In scope
- [ ] ‡∏ï‡∏≤‡∏£‡∏≤‡∏á endpoints + deliveries ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å delivery log ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
- [ ] HMAC signature header + correlation id + timeout
- [ ] Admin CRUD endpoints + deliveries list + manual retry (‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥)

### Out of scope
- [ ] Queue worker ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö/parallelism ‡∏™‡∏π‡∏á/partitioning
- [ ] Advanced webhook features (event versioning, per-endpoint transforms, DLQ)
- [ ] UI analytics/reporting ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö webhook (charts, KPIs)

### 14.1 Tables (Migration Snippet)
```php
// database/migrations/xxxx_xx_xx_xxxxxx_create_webhooks_tables.php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration {
    public function up(): void
    {
        Schema::create('webhook_endpoints', function (Blueprint $table) {
            $table->id();
            $table->uuid('tenant_id')->index();
            $table->string('name', 100);
            $table->string('url', 500);
            $table->string('secret', 255)->nullable();
            $table->json('events')->nullable();
            $table->boolean('is_active')->default(true);
            $table->timestamps();
            $table->index(['tenant_id', 'is_active']);
        });

        Schema::create('webhook_deliveries', function (Blueprint $table) {
            $table->id();
            $table->uuid('tenant_id')->index();
            $table->foreignId('endpoint_id')->constrained('webhook_endpoints')->cascadeOnDelete();
            $table->string('event', 100)->index();
            $table->string('correlation_id', 64)->nullable()->index();
            $table->unsignedSmallInteger('attempt')->default(0);
            $table->unsignedSmallInteger('status_code')->nullable();
            $table->text('error')->nullable();
            $table->timestamp('next_retry_at')->nullable()->index();
            $table->json('payload')->nullable();
            $table->timestamps();
        });
    }
};
```

### 14.2 Dispatcher Service (Signing + Delivery Log)
```php
// app/Services/WebhookDispatcher.php

namespace App\Services;

use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Http;
use Illuminate\Support\Str;

class WebhookDispatcher
{
    public function dispatch(string $event, array $payload, ?string $correlationId = null): void
    {
        $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');

        $cid = $correlationId
            ?? request()->header('X-Correlation-Id')
            ?? (string) Str::uuid();

        $endpoints = DB::table('webhook_endpoints')
            ->where('tenant_id', $tenantId)
            ->where('is_active', 1)
            ->get();

        foreach ($endpoints as $ep) {
            $events = $ep->events ? json_decode($ep->events, true) : [];
            if (!empty($events) && !in_array($event, $events, true)) {
                continue;
            }

            $deliveryId = DB::table('webhook_deliveries')->insertGetId([
                'tenant_id' => $tenantId,
                'endpoint_id' => $ep->id,
                'event' => $event,
                'correlation_id' => $cid,
                'attempt' => 0,
                'payload' => json_encode($payload, JSON_UNESCAPED_UNICODE),
                'created_at' => now(),
                'updated_at' => now(),
            ]);

            // Minimal: deliver sync (Phase 18 can move to queue job)
            $this->deliverNow($deliveryId);
        }
    }

    public function deliverNow(int $deliveryId): void
    {
        $delivery = DB::table('webhook_deliveries')->where('id', $deliveryId)->first();
        $endpoint = DB::table('webhook_endpoints')->where('id', $delivery->endpoint_id)->first();

        $body = json_encode(json_decode($delivery->payload ?? '[]', true), JSON_UNESCAPED_UNICODE);
        $signature = $endpoint->secret ? hash_hmac('sha256', $body, $endpoint->secret) : null;

        try {
            $res = Http::timeout(10)
                ->withHeaders(array_filter([
                    'Content-Type' => 'application/json',
                    'X-Neonex-Event' => $delivery->event,
                    'X-Correlation-Id' => $delivery->correlation_id,
                    'X-Neonex-Signature' => $signature,
                ]))
                ->post($endpoint->url, json_decode($body, true));

            DB::table('webhook_deliveries')->where('id', $deliveryId)->update([
                'attempt' => (int) $delivery->attempt + 1,
                'status_code' => $res->status(),
                'error' => $res->successful() ? null : substr((string) $res->body(), 0, 2000),
                'updated_at' => now(),
            ]);

            audit()->record('webhooks.delivered', [
                'endpoint_id' => $endpoint->id,
                'event' => $delivery->event,
                'status' => $res->status(),
            ]);
        } catch (\Throwable $e) {
            $next = now()->addMinutes(min(60, (int) pow(2, (int) $delivery->attempt)));
            DB::table('webhook_deliveries')->where('id', $deliveryId)->update([
                'attempt' => (int) $delivery->attempt + 1,
                'status_code' => null,
                'error' => substr($e->getMessage(), 0, 2000),
                'next_retry_at' => $next,
                'updated_at' => now(),
            ]);

            audit()->record('webhooks.failed', [
                'endpoint_id' => $endpoint->id,
                'event' => $delivery->event,
                'error' => $e->getMessage(),
            ]);
        }
    }
}
```

### 14.3 Admin UI Snippets (Endpoints + Deliveries)

**Routes:**
```php
use App\Http\Controllers\Admin\WebhookEndpointController;
use App\Http\Controllers\Admin\WebhookDeliveryController;

Route::middleware(['web', 'auth', 'tenant.selected'])->prefix('admin')->name('admin.')->group(function () {
    Route::get('webhooks', [WebhookEndpointController::class, 'index'])->name('webhooks.index');
    Route::get('webhooks/create', [WebhookEndpointController::class, 'create'])->name('webhooks.create');
    Route::post('webhooks', [WebhookEndpointController::class, 'store'])->name('webhooks.store');
    Route::get('webhooks/{id}/edit', [WebhookEndpointController::class, 'edit'])->name('webhooks.edit');
    Route::put('webhooks/{id}', [WebhookEndpointController::class, 'update'])->name('webhooks.update');
    Route::delete('webhooks/{id}', [WebhookEndpointController::class, 'destroy'])->name('webhooks.destroy');

    Route::get('webhook-deliveries', [WebhookDeliveryController::class, 'index'])->name('webhook-deliveries.index');
    Route::post('webhook-deliveries/{id}/retry', [WebhookDeliveryController::class, 'retry'])->name('webhook-deliveries.retry');
});
```

**WebhookEndpointController (minimal CRUD):**
```php
// app/Http/Controllers/Admin/WebhookEndpointController.php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\DB;

class WebhookEndpointController extends Controller
{
    public function index()
    {
        $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
        $rows = DB::table('webhook_endpoints')->where('tenant_id', $tenantId)->orderByDesc('id')->paginate(50);
        return view('admin.webhooks.index', compact('rows'));
    }

    public function create()
    {
        return view('admin.webhooks.create');
    }

    public function store(Request $request)
    {
        $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
        $data = $request->validate([
            'name' => ['required','string','max:100'],
            'url' => ['required','url','max:500'],
            'secret' => ['nullable','string','max:255'],
            'events' => ['nullable','string'], // comma separated, minimal
            'is_active' => ['nullable','boolean'],
        ]);

        $events = array_values(array_filter(array_map('trim', explode(',', (string) ($data['events'] ?? '')))));

        DB::table('webhook_endpoints')->insert([
            'tenant_id' => $tenantId,
            'name' => $data['name'],
            'url' => $data['url'],
            'secret' => $data['secret'] ?? null,
            'events' => json_encode($events, JSON_UNESCAPED_UNICODE),
            'is_active' => (int) ($data['is_active'] ?? 1),
            'created_at' => now(),
            'updated_at' => now(),
        ]);

        audit()->record('webhooks.endpoint.created', ['name' => $data['name'], 'url' => $data['url']]);

        return redirect()->route('admin.webhooks.index');
    }

    public function edit(int $id)
    {
        $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
        $row = DB::table('webhook_endpoints')->where('tenant_id', $tenantId)->where('id', $id)->first();
        abort_if(!$row, 404);
        return view('admin.webhooks.edit', compact('row'));
    }

    public function update(Request $request, int $id)
    {
        $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
        $row = DB::table('webhook_endpoints')->where('tenant_id', $tenantId)->where('id', $id)->first();
        abort_if(!$row, 404);

        $data = $request->validate([
            'name' => ['required','string','max:100'],
            'url' => ['required','url','max:500'],
            'secret' => ['nullable','string','max:255'],
            'events' => ['nullable','string'],
            'is_active' => ['nullable','boolean'],
        ]);

        $events = array_values(array_filter(array_map('trim', explode(',', (string) ($data['events'] ?? '')))));

        DB::table('webhook_endpoints')->where('id', $id)->update([
            'name' => $data['name'],
            'url' => $data['url'],
            'secret' => $data['secret'] ?? null,
            'events' => json_encode($events, JSON_UNESCAPED_UNICODE),
            'is_active' => (int) ($data['is_active'] ?? 1),
            'updated_at' => now(),
        ]);

        audit()->record('webhooks.endpoint.updated', ['id' => $id, 'name' => $data['name']]);
        return redirect()->route('admin.webhooks.index');
    }

    public function destroy(int $id)
    {
        $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
        DB::table('webhook_endpoints')->where('tenant_id', $tenantId)->where('id', $id)->delete();
        audit()->record('webhooks.endpoint.deleted', ['id' => $id]);
        return response()->json(['ok' => true]);
    }
}
```

**WebhookDeliveryController (list + retry):**
```php
// app/Http/Controllers/Admin/WebhookDeliveryController.php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Support\Facades\DB;

class WebhookDeliveryController extends Controller
{
    public function index()
    {
        $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
        $rows = DB::table('webhook_deliveries')->where('tenant_id', $tenantId)->orderByDesc('id')->paginate(50);
        return view('admin.webhook-deliveries.index', compact('rows'));
    }

    public function retry(int $id)
    {
        $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
        $row = DB::table('webhook_deliveries')->where('tenant_id', $tenantId)->where('id', $id)->first();
        abort_if(!$row, 404);

        // Minimal: immediate retry
        app(\App\Services\WebhookDispatcher::class)->deliverNow($id);

        return response()->json(['ok' => true]);
    }
}
```

**Retry action (jQuery router style):**
```blade
{{-- inside deliveries table row --}}
<button class="btn btn-sm btn-primary" data-action="webhook.delivery.retry" data-id="{{ $r->id }}">Retry</button>

@push('scripts')
<script>
$(document).on('click', '[data-action="webhook.delivery.retry"]', function(e){
  e.preventDefault();
  const id = $(this).data('id');
  $.post('/admin/webhook-deliveries/' + id + '/retry', {_token: '{{ csrf_token() }}'})
    .done(() => location.reload())
    .fail(xhr => alert(xhr.responseJSON?.message || 'Error'));
});
</script>
@endpush
```

**Exit criteria (Phase 14):**
- [ ] Endpoint CRUD exists and is tenant-scoped
- [ ] Deliveries are logged per attempt (success/fail)
- [ ] Signature header is generated and retry works

### Phase 14 Output
- [ ] ‡∏°‡∏µ endpoint CRUD + deliveries list
- [ ] ‡∏™‡πà‡∏á webhook ‡πÑ‡∏î‡πâ ‡∏û‡∏£‡πâ‡∏≠‡∏° signature + retry log

---

## [Layer C] [Kernel + Modules] Phase 15: API Baseline + Domain Events (6-8 hours)

### Objective
‡∏ß‡∏≤‡∏á ‚Äú‡∏™‡∏±‡∏ç‡∏ç‡∏≤ API‚Äù ‡πÅ‡∏•‡∏∞ domain events ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ modules/apps ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö webhooks/audit ‡πÑ‡∏î‡πâ‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

### In scope
- [ ] Response convention ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ `{ ok, data, message }`
- [ ] Event naming + ‡∏à‡∏∏‡∏î emit ‡∏´‡∏•‡∏±‡∏Å (create/update/delete/important state changes)
- [ ] `DomainEventBus` + helper `events_bus()` ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏á‡∏Å‡∏•‡∏≤‡∏á (audit ‚Üí webhook ‚Üí notification)

### Out of scope
- [ ] ‡∏ó‡∏≥‡∏£‡∏∞‡∏ö‡∏ö API auth ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏ç‡πà (OAuth2, API keys management UI)
- [ ] API versioning ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö + OpenAPI generator
- [ ] ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô admin UI ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô SPA (‡∏Ç‡∏±‡∏î‡∏Å‡∏±‡∏ö no-build)

### 15.1 API Conventions
- Admin UI ‡πÉ‡∏ä‡πâ SSR/Blade ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å
- API ‡πÄ‡∏õ‡πá‡∏ô optional/‡∏£‡∏≠‡∏á: ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö integrations/webhooks/test tools

**Response convention (minimal):**
```json
{ "ok": true, "data": {}, "message": "" }
```

### 15.2 Domain Events (Contract)
- Event names ‡πÉ‡∏ä‡πâ‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö audit/webhooks
- ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î event ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: `audit` ‡∏Å‡πà‡∏≠‡∏ô ‚Üí ‡πÅ‡∏•‡πâ‡∏ß `webhook dispatch` ‡∏ï‡∏≤‡∏° subscription

### 15.3 Domain Event Helper (Snippets)

> ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: ‡πÇ‡∏°‡∏î‡∏π‡∏• emit event ‡∏ú‡πà‡∏≤‡∏ô Kernel helper ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ audit/webhooks/notifications ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

```php
// app/Services/DomainEventBus.php

namespace App\Services;

class DomainEventBus
{
    public function emit(string $event, array $payload = [], $subject = null): void
    {
        audit()->record($event, $payload, subject: $subject);

        // Webhooks is optional; if service exists, dispatch
        if (app()->bound(\App\Services\WebhookDispatcher::class)) {
            app(\App\Services\WebhookDispatcher::class)->dispatch($event, $payload);
        }

        // Notifications hook comes in Phase 18
        if (app()->bound(\App\Services\NotificationService::class)) {
            app(\App\Services\NotificationService::class)->notifyFromEvent($event, $payload);
        }
    }
}
```

```php
// app/helpers.php

use App\Services\DomainEventBus;

function events_bus(): DomainEventBus
{
    return app(DomainEventBus::class);
}
```

**Usage in any module:**
```php
events_bus()->emit('users.created', ['user_id' => $user->id, 'email' => $user->email], subject: $user);
```

**Exit criteria (Phase 15):**
- [ ] `events_bus()->emit()` works from at least one module action
- [ ] Fan-out contract exists (audit ‚Üí webhook ‚Üí notification hook)
- [ ] API response convention is documented and used where applicable

### Phase 15 Output
- [ ] ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ event list (‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥) + ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á emit
- [ ] API endpoints ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á 1‚Äì2 ‡∏à‡∏∏‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö (‡πÑ‡∏°‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô SPA)

---

## [Layer C] [Kernel + Modules] Phase 16: Exports (CSV/XLSX optional) (6-8 hours)

### Objective
‡∏ó‡∏≥ export ‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡πÇ‡∏°‡∏î‡∏π‡∏•‡πÉ‡∏ä‡πâ pattern ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (tenant-safe, permission-guarded)

### In scope
- [ ] Streamed CSV export pattern (‡πÑ‡∏°‡πà‡∏Å‡∏¥‡∏ô RAM)
- [ ] Audit event `exports.generated`
- [ ] ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á export ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏à‡∏∏‡∏î (‡πÄ‡∏ä‡πà‡∏ô users)

### Out of scope
- [ ] XLSX/complex formatting/report builder (‡∏ó‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
- [ ] Background export + notify when done (‡∏à‡∏∞‡πÇ‡∏¢‡∏á Phase 18/queue)
- [ ] RBAC matrix ‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å export ‡∏ä‡∏ô‡∏¥‡∏î

### 16.1 Minimal Export Pattern (CSV, no heavy vendor)
- ‡πÉ‡∏ä‡πâ streamed response
- ‡πÉ‡∏™‡πà audit `exports.generated`

### 16.2 Export Controller Snippet (Streamed CSV)
```php
// app/Http/Controllers/Admin/UserExportController.php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\User;
use Symfony\Component\HttpFoundation\StreamedResponse;

class UserExportController extends Controller
{
    public function exportCsv(): StreamedResponse
    {
        $filename = 'users_' . date('Ymd_His') . '.csv';

        audit()->record('exports.generated', ['type' => 'users', 'format' => 'csv']);

        return response()->streamDownload(function () {
            $out = fopen('php://output', 'w');
            fputcsv($out, ['id', 'name', 'email']);

            User::query()
                ->orderBy('id')
                ->chunk(500, function ($rows) use ($out) {
                    foreach ($rows as $u) {
                        fputcsv($out, [$u->id, $u->name, $u->email]);
                    }
                });

            fclose($out);
        }, $filename, ['Content-Type' => 'text/csv']);
    }
}
```

**Route + button:**
```php
Route::get('/admin/exports/users.csv', [UserExportController::class, 'exportCsv'])
  ->middleware(['web','auth','tenant.selected'])
  ->name('admin.exports.users.csv');
```

```blade
<a class="btn btn-outline-primary" href="{{ route('admin.exports.users.csv') }}">Export CSV</a>
```

**Exit criteria (Phase 16):**
- [ ] CSV export streams (no memory spike)
- [ ] Export is tenant-safe + permission-guarded
- [ ] Audit records `exports.generated`

### Phase 16 Output
- [ ] ‡∏°‡∏µ helper/pattern export CSV ‡∏ó‡∏µ‡πà reuse ‡πÑ‡∏î‡πâ
- [ ] ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á Users/Media export ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£

---

## [Layer C] [Kernel + Modules] Phase 17: Search (Lightweight) (6-8 hours)

### Objective
‡∏ó‡∏≥ search ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ö‡∏≤‡πÜ ‡∏Å‡πà‡∏≠‡∏ô (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á elastic) ‡πÅ‡∏ï‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö tenant isolation

### In scope
- [ ] SSR search page (querystring) + ‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ users/pages/media
- [ ] Tenant scoping ‡∏ó‡∏∏‡∏Å query + index ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡πÉ‡∏ô DB
- [ ] ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå/limit ‡πÄ‡∏û‡∏∑‡πà‡∏≠ performance

### Out of scope
- [ ] Elastic/OpenSearch/Meilisearch integration
- [ ] Relevance tuning/typo tolerance/synonyms
- [ ] Global indexing pipeline + async rebuild

### 17.1 Strategy
- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å DB search + indexes (‡∏´‡∏£‡∏∑‡∏≠ FULLTEXT ‡∏ñ‡πâ‡∏≤‡πÄ‡∏´‡∏°‡∏≤‡∏∞)
- Search UI ‡πÄ‡∏õ‡πá‡∏ô SSR + querystring (‡∏•‡∏î JS)

### 17.2 Admin Global Search Snippet (SSR + Querystring)
```php
// app/Http/Controllers/Admin/GlobalSearchController.php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use App\Models\User;
use Illuminate\Support\Facades\DB;

class GlobalSearchController extends Controller
{
        public function index(Request $request)
        {
                $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
                $q = trim((string) $request->get('q', ''));

                $users = [];
                $pages = [];
                $media = [];

                if ($q !== '') {
                        $users = User::query()
                                ->where('name', 'like', "%{$q}%")
                                ->orWhere('email', 'like', "%{$q}%")
                                ->limit(20)
                                ->get();

                        // If Pages/Media are modules, query via DB table names for minimal coupling
                        $pages = DB::table('pages')->where('tenant_id', $tenantId)
                                ->where('title', 'like', "%{$q}%")
                                ->limit(20)->get();

                        $media = DB::table('media_files')->where('tenant_id', $tenantId)
                                ->where('filename', 'like', "%{$q}%")
                                ->limit(20)->get();
                }

                return view('admin.search.index', compact('q', 'users', 'pages', 'media'));
        }
}
```

```blade
{{-- resources/views/admin/search/index.blade.php --}}
@extends('themes.limitless.layouts.app')

@section('content')
<div class="card">
    <div class="card-header"><h6 class="mb-0">Search</h6></div>
    <div class="card-body">
        <form method="GET" action="{{ route('admin.search.index') }}" class="row g-2 mb-3">
            <div class="col-md-6">
                <input class="form-control" name="q" value="{{ $q }}" placeholder="Search users/pages/media...">
            </div>
            <div class="col-md-2"><button class="btn btn-primary" type="submit">Search</button></div>
        </form>

        @if($q)
            <h6>Users</h6>
            <ul>@foreach($users as $u)<li>{{ $u->name }} ({{ $u->email }})</li>@endforeach</ul>

            <h6>Pages</h6>
            <ul>@foreach($pages as $p)<li>{{ $p->title }} ({{ $p->slug }})</li>@endforeach</ul>

            <h6>Media</h6>
            <ul>@foreach($media as $m)<li>{{ $m->filename }}</li>@endforeach</ul>
        @endif
    </div>
</div>
@endsection
```

**Route:**
```php
Route::get('/admin/search', [GlobalSearchController::class, 'index'])
    ->middleware(['web','auth','tenant.selected'])
    ->name('admin.search.index');
```

**Exit criteria (Phase 17):**
- [ ] Admin global search returns results scoped by tenant
- [ ] Results link to existing admin pages
- [ ] Query is limited/sane for performance

### Phase 17 Output
- [ ] Global search endpoint ‡πÉ‡∏ô admin (‡∏Ñ‡πâ‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ users/pages/media)
- [ ] ‡∏ó‡∏∏‡∏Å query ‡∏°‡∏µ tenant scope

---

## [Layer C] [Kernel] Phase 18: Notifications + Queue/Scheduler Contracts (6-10 hours)

### Objective
‡∏ó‡∏≥‡πÉ‡∏´‡πâ notification ‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏≤‡∏á‚Äù ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢ channel ‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏á‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤ queue/scheduler ‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡πà‡∏≠ scale

### In scope
- [ ] ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `notification_deliveries` + admin list
- [ ] Mail-first send (sync ‡πÑ‡∏î‡πâ‡∏Å‡πà‡∏≠‡∏ô) + test send endpoint/UI
- [ ] ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î idempotency/retry ‡πÄ‡∏õ‡πá‡∏ô contract (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô)

### Out of scope
- [ ] Multi-channel ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö (SMS/LINE/Push) ‡πÅ‡∏•‡∏∞ preference center
- [ ] Job orchestration ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô/cron UI
- [ ] Advanced template editor (drag-drop) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö notification

### 18.1 Notification Delivery Log (Contract)
- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à/‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß)
- ‡∏™‡πà‡∏á‡πÅ‡∏ö‡∏ö sync ‡πÑ‡∏î‡πâ‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏ï‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö queue

### 18.2 Queue/Scheduler Conventions
- retry policy ‡∏ï‡πà‡∏≠ job
- idempotency key ‡∏ï‡πà‡∏≠ delivery (‡∏Å‡∏±‡∏ô‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥)

### 18.3 Minimal Notification Delivery Log (Migration)
```php
// database/migrations/xxxx_xx_xx_xxxxxx_create_notification_deliveries_table.php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration {
        public function up(): void
        {
                Schema::create('notification_deliveries', function (Blueprint $table) {
                        $table->id();
                        $table->uuid('tenant_id')->nullable()->index();
                        $table->string('channel', 30)->index(); // mail, webhook, sms (future)
                        $table->string('event', 100)->nullable()->index();
                        $table->string('to', 255)->nullable();
                        $table->string('subject', 255)->nullable();
                        $table->unsignedSmallInteger('status_code')->nullable();
                        $table->string('status', 30)->default('queued')->index(); // queued|sent|failed
                        $table->string('idempotency_key', 80)->nullable()->index();
                        $table->text('error')->nullable();
                        $table->json('payload')->nullable();
                        $table->timestamps();
                });
        }
};
```

### 18.4 Notification Service (Mail-first, optional queue)
```php
// app/Services/NotificationService.php

namespace App\Services;

use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Mail;
use Illuminate\Support\Str;

class NotificationService
{
        public function notifyFromEvent(string $event, array $payload = []): void
        {
                // Minimal: decide routing elsewhere; here provide a single test path
        }

        public function sendMail(string $to, string $subject, string $html, ?string $event = null, array $payload = []): void
        {
                $tenantId = function_exists('tenant_id') ? tenant_id() : (app()->bound('tenant.id') ? app('tenant.id') : null);
                $key = (string) Str::uuid();

                $id = DB::table('notification_deliveries')->insertGetId([
                        'tenant_id' => $tenantId,
                        'channel' => 'mail',
                        'event' => $event,
                        'to' => $to,
                        'subject' => $subject,
                        'status' => 'queued',
                        'idempotency_key' => $key,
                        'payload' => json_encode($payload, JSON_UNESCAPED_UNICODE),
                        'created_at' => now(),
                        'updated_at' => now(),
                ]);

                try {
                        Mail::html($html, function ($m) use ($to, $subject) {
                                $m->to($to)->subject($subject);
                        });

                        DB::table('notification_deliveries')->where('id', $id)->update([
                                'status' => 'sent',
                                'status_code' => 200,
                                'updated_at' => now(),
                        ]);

                        audit()->record('notifications.sent', ['channel' => 'mail', 'to' => $to, 'subject' => $subject]);
                } catch (\Throwable $e) {
                        DB::table('notification_deliveries')->where('id', $id)->update([
                                'status' => 'failed',
                                'status_code' => null,
                                'error' => substr($e->getMessage(), 0, 2000),
                                'updated_at' => now(),
                        ]);
                        audit()->record('notifications.failed', ['channel' => 'mail', 'to' => $to, 'error' => $e->getMessage()]);
                }
        }
}
```

### 18.5 Admin Test Send + List UI (Snippets)
```php
// routes/web.php
use App\Http\Controllers\Admin\NotificationController;

Route::middleware(['web','auth','tenant.selected'])->prefix('admin')->name('admin.')->group(function(){
    Route::get('notifications', [NotificationController::class, 'index'])->name('notifications.index');
    Route::post('notifications/test-email', [NotificationController::class, 'testEmail'])->name('notifications.test-email');
});
```

```php
// app/Http/Controllers/Admin/NotificationController.php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\DB;

class NotificationController extends Controller
{
        public function index()
        {
                $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
                $rows = DB::table('notification_deliveries')
                        ->where('tenant_id', $tenantId)
                        ->orderByDesc('id')
                        ->paginate(50);

                return view('admin.notifications.index', compact('rows'));
        }

        public function testEmail(Request $request)
        {
                $data = $request->validate([
                        'to' => ['required', 'email'],
                ]);

                app(\App\Services\NotificationService::class)
                        ->sendMail($data['to'], 'Test Email', '<p>Test notification</p>', 'notifications.test');

                return response()->json(['ok' => true]);
        }
}
```

```blade
{{-- resources/views/admin/notifications/index.blade.php --}}
@extends('themes.limitless.layouts.app')

@section('content')
<div class="card">
    <div class="card-header"><h6 class="mb-0">Notifications</h6></div>
    <div class="card-body">
        <div class="row g-2 mb-3">
            <div class="col-md-4">
                <input class="form-control" id="testTo" placeholder="email to...">
            </div>
            <div class="col-md-2">
                <button class="btn btn-primary" data-action="notification.test.email">Send test</button>
            </div>
        </div>

        <div class="table-responsive">
            <table class="table table-sm">
                <thead><tr><th>ID</th><th>Time</th><th>Channel</th><th>To</th><th>Status</th><th>Event</th></tr></thead>
                <tbody>
                    @foreach($rows as $r)
                        <tr>
                            <td>{{ $r->id }}</td>
                            <td>{{ $r->created_at }}</td>
                            <td>{{ $r->channel }}</td>
                            <td>{{ $r->to }}</td>
                            <td>{{ $r->status }}</td>
                            <td>{{ $r->event }}</td>
                        </tr>
                    @endforeach
                </tbody>
            </table>
        </div>

        <div class="mt-3">{{ $rows->links() }}</div>
    </div>
</div>
@endsection

@push('scripts')
<script>
$(document).on('click','[data-action="notification.test.email"]', function(e){
    e.preventDefault();
    $.post('{{ route('admin.notifications.test-email') }}', {
        _token: '{{ csrf_token() }}',
        to: $('#testTo').val()
    }).done(() => location.reload())
        .fail(xhr => alert(xhr.responseJSON?.message || 'Error'));
});
</script>
@endpush
```

**Exit criteria (Phase 18):**
- [ ] Notification delivery logs are recorded (success/fail)
- [ ] Admin can test-send at least one channel (email)
- [ ] Failures are visible and diagnosable from the admin list

### Phase 18 Output
- [ ] delivery log table + UI list
- [ ] send test notification ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (email/webhook ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1)

---

## [Layer C] [Kernel + Modules] Phase 19: I18n Dictionary + Import/Export (6-8 hours)

### Objective
‡πÉ‡∏´‡πâ i18n ‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏≤‡∏á (‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ó‡∏≥‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏õ‡∏•‡∏Å‡∏£‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢)

### In scope
- [ ] ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `translations` + CRUD ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ + export CSV
- [ ] Tenant-aware dictionary (tenant_id scoped) + fallback rule ‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö concept
- [ ] Admin UI ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ + jQuery upsert

### Out of scope
- [ ] Runtime translation loader ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡∏ô Laravel lang files ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- [ ] Auto-translate ‡∏î‡πâ‡∏ß‡∏¢ external provider
- [ ] Workflow ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•/translation QA pipeline

### 19.1 Dictionary Tables (Contract)
- `translations` (key, locale, value, group, tenant_id nullable)

### 19.2 Minimal Table + CRUD Snippets

**Migration:**
```php
// database/migrations/xxxx_xx_xx_xxxxxx_create_translations_table.php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration {
    public function up(): void
    {
        Schema::create('translations', function (Blueprint $table) {
            $table->id();
            $table->uuid('tenant_id')->nullable()->index();
            $table->string('group', 80)->default('app')->index();
            $table->string('key', 190)->index();
            $table->string('locale', 10)->index();
            $table->longText('value')->nullable();
            $table->timestamps();
            $table->unique(['tenant_id', 'group', 'key', 'locale']);
        });
    }
};
```

**Routes:**
```php
use App\Http\Controllers\Admin\TranslationController;

Route::middleware(['web','auth','tenant.selected'])->prefix('admin')->name('admin.')->group(function(){
  Route::get('translations', [TranslationController::class, 'index'])->name('translations.index');
  Route::post('translations', [TranslationController::class, 'store'])->name('translations.store');
  Route::post('translations/import', [TranslationController::class, 'import'])->name('translations.import');
  Route::get('translations/export', [TranslationController::class, 'export'])->name('translations.export');
});
```

**Controller (minimal):**
```php
// app/Http/Controllers/Admin/TranslationController.php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\DB;
use Symfony\Component\HttpFoundation\StreamedResponse;

class TranslationController extends Controller
{
    public function index(Request $request)
    {
        $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
        $q = trim((string) $request->get('q', ''));
        $locale = $request->get('locale', 'en');

        $rowsQ = DB::table('translations')
            ->where('tenant_id', $tenantId)
            ->where('locale', $locale);

        if ($q !== '') {
            $rowsQ->where(function($x) use ($q){
                $x->where('key','like',"%{$q}%")->orWhere('value','like',"%{$q}%");
            });
        }

        $rows = $rowsQ->orderBy('group')->orderBy('key')->paginate(50)->withQueryString();
        return view('admin.translations.index', compact('rows','q','locale'));
    }

    public function store(Request $request)
    {
        $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
        $data = $request->validate([
            'group' => ['required','string','max:80'],
            'key' => ['required','string','max:190'],
            'locale' => ['required','string','max:10'],
            'value' => ['nullable','string'],
        ]);

        DB::table('translations')->updateOrInsert(
            ['tenant_id' => $tenantId, 'group' => $data['group'], 'key' => $data['key'], 'locale' => $data['locale']],
            ['value' => $data['value'], 'updated_at' => now(), 'created_at' => now()]
        );

        audit()->record('i18n.translation.upserted', ['group' => $data['group'], 'key' => $data['key'], 'locale' => $data['locale']]);

        return response()->json(['ok' => true]);
    }

    public function export(Request $request): StreamedResponse
    {
        $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
        $locale = $request->get('locale', 'en');

        audit()->record('i18n.exported', ['locale' => $locale]);

        return response()->streamDownload(function() use ($tenantId, $locale){
            $out = fopen('php://output', 'w');
            fputcsv($out, ['group','key','locale','value']);

            DB::table('translations')
                ->where('tenant_id', $tenantId)
                ->where('locale', $locale)
                ->orderBy('group')->orderBy('key')
                ->chunk(500, function($rows) use ($out){
                    foreach ($rows as $r) {
                        fputcsv($out, [$r->group, $r->key, $r->locale, $r->value]);
                    }
                });

            fclose($out);
        }, "translations_{$locale}.csv", ['Content-Type' => 'text/csv']);
    }

    public function import(Request $request)
    {
        // Minimal: accept CSV upload, parse rows, upsert. (Implementation detail omitted here)
        audit()->record('i18n.imported', ['note' => 'CSV import']);
        return response()->json(['ok' => true]);
    }
}
```

**View (minimal SSR + jQuery upsert):**
```blade
{{-- resources/views/admin/translations/index.blade.php --}}
@extends('themes.limitless.layouts.app')

@section('content')
<div class="card">
    <div class="card-header"><h6 class="mb-0">Translations</h6></div>
    <div class="card-body">
    <form class="row g-2 mb-3" method="GET" action="{{ route('admin.translations.index') }}">
        <div class="col-md-2">
            <input class="form-control" name="locale" value="{{ $locale }}" placeholder="locale ‡πÄ‡∏ä‡πà‡∏ô en">
        </div>
        <div class="col-md-4">
            <input class="form-control" name="q" value="{{ $q }}" placeholder="search key/value">
        </div>
        <div class="col-md-2">
            <button class="btn btn-primary" type="submit">Search</button>
        </div>
        <div class="col-md-4 text-end">
            <a class="btn btn-outline-primary" href="{{ route('admin.translations.export', ['locale' => $locale]) }}">Export CSV</a>
        </div>
    </form>

    <div class="row g-2 mb-3">
        <div class="col-md-2"><input class="form-control" id="tGroup" placeholder="group" value="app"></div>
        <div class="col-md-3"><input class="form-control" id="tKey" placeholder="key"></div>
        <div class="col-md-1"><input class="form-control" id="tLocale" placeholder="locale" value="{{ $locale }}"></div>
        <div class="col-md-4"><input class="form-control" id="tValue" placeholder="value"></div>
        <div class="col-md-2"><button class="btn btn-primary w-100" data-action="translation.upsert">Upsert</button></div>
    </div>

    <div class="table-responsive">
        <table class="table table-sm">
            <thead><tr><th>Group</th><th>Key</th><th>Locale</th><th>Value</th></tr></thead>
            <tbody>
                @foreach($rows as $r)
                    <tr>
                        <td>{{ $r->group }}</td>
                        <td><code>{{ $r->key }}</code></td>
                        <td>{{ $r->locale }}</td>
                        <td>{{ $r->value }}</td>
                    </tr>
                @endforeach
            </tbody>
        </table>
    </div>

    <div class="mt-3">{{ $rows->links() }}</div>
    </div>
</div>

    <div class="mt-3">{{ $rows->links() }}</div>
</x-limitless::card>
@endsection

@push('scripts')
<script>
$(document).on('click','[data-action="translation.upsert"]', function(e){
    e.preventDefault();
    $.post('{{ route('admin.translations.store') }}', {
        _token: '{{ csrf_token() }}',
        group: $('#tGroup').val(),
        key: $('#tKey').val(),
        locale: $('#tLocale').val(),
        value: $('#tValue').val(),
    }).done(() => location.reload())
        .fail(xhr => alert(xhr.responseJSON?.message || 'Error'));
});
</script>
@endpush
```

**Exit criteria (Phase 19):**
- [ ] Admin can upsert a translation key per locale (tenant-aware)
- [ ] Export works (CSV/JSON) and produces usable file
- [ ] Fallback behavior is documented and predictable

### Phase 19 Output
- [ ] Admin CRUD + import/export (CSV/JSON) ‡πÑ‡∏î‡πâ
- [ ] fallback rule ‡∏ä‡∏±‡∏î

---

## [Layer C] [Kernel + App] Phase 20: Theme Manager (6-8 hours)

### Objective
‡∏ó‡∏≥‡πÉ‡∏´‡πâ ‚Äú‡∏™‡∏•‡∏±‡∏ö theme‚Äù ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á config/app layer ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö module logic

### In scope
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ theme ‡∏ú‡πà‡∏≤‡∏ô settings key `theme.active`
- [ ] Admin UI ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å theme + save (SSR + jQuery)
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° `SettingService::set()` ‡πÅ‡∏ö‡∏ö minimal (updateOrInsert + cache forget)

### Out of scope
- [ ] Theme marketplace/installer/download (‡∏≠‡∏¢‡πà‡∏≤‡∏ó‡∏≥‡πÉ‡∏ô core; ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô optional tooling ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
- [ ] Multi-theme per page/AB testing
- [ ] Theme customization UI ‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á (color builder, layout designer)

### 20.1 Minimal UI
- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å theme ‡∏à‡∏≤‡∏Å list (Limitless, AdminLTE4 future)
- Save ‡πÄ‡∏õ‡πá‡∏ô setting (`theme.active`) ‡πÅ‡∏ö‡∏ö tenant/app scope

### 20.2 Admin Theme Switch Snippets

**Policy:** theme ‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡πà‡∏≤‡∏ô settings key ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß: `theme.active`

**Route + Controller:**
```php
// routes/web.php
use App\Http\Controllers\Admin\ThemeManagerController;

Route::middleware(['web','auth','tenant.selected'])->prefix('admin')->name('admin.')->group(function(){
    Route::get('theme', [ThemeManagerController::class, 'index'])->name('theme.index');
    Route::post('theme', [ThemeManagerController::class, 'update'])->name('theme.update');
});
```

```php
// app/Http/Controllers/Admin/ThemeManagerController.php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

class ThemeManagerController extends Controller
{
        public function index()
        {
                $themes = config('theme.available', ['limitless']);
                $active = app(\App\Services\SettingService::class)->get('app', 'theme.active', config('theme.default', 'limitless'));
                return view('admin.theme.index', compact('themes','active'));
        }

        public function update(Request $request)
        {
                $data = $request->validate(['theme' => ['required','string']]);
            // If SettingService::set() does not exist yet, implement it using updateOrInsert (same table as Phase 4)
            app(\App\Services\SettingService::class)->set('app', 'theme.active', $data['theme']);
                audit()->record('theme.changed', ['theme' => $data['theme']]);
                return response()->json(['ok' => true]);
        }
}
```

    **Add `set()` to SettingService (so Theme Manager is copy/paste-ready):**
    ```php
    // app/Services/SettingService.php

    use Illuminate\Support\Facades\DB;

    public function set(string $group, string $key, $value): void
    {
        $tenantId = app('tenant.id');

        DB::table('settings')->updateOrInsert(
            ['tenant_id' => $tenantId, 'group' => $group, 'key' => $key],
            ['value' => (string) $value, 'type' => 'string', 'updated_at' => now(), 'created_at' => now()]
        );

        cache()->forget("settings:{$tenantId}:{$group}:{$key}");
    }
    ```

**View:**
```blade
{{-- resources/views/admin/theme/index.blade.php --}}
@extends('themes.limitless.layouts.app')

@section('content')
<x-limitless::card title="Theme Manager">
    <div class="row g-2">
        <div class="col-md-4">
            <select class="form-select" id="themeSelect">
                @foreach($themes as $t)
                    <option value="{{ $t }}" @selected($t === $active)>{{ $t }}</option>
                @endforeach
            </select>
        </div>
        <div class="col-md-2">
            <button class="btn btn-primary" data-action="theme.save">Save</button>
        </div>
    </div>
</x-limitless::card>
@endsection

@push('scripts')
<script>
$(document).on('click','[data-action="theme.save"]', function(e){
    e.preventDefault();
    $.post('{{ route('admin.theme.update') }}', {
        _token: '{{ csrf_token() }}',
        theme: $('#themeSelect').val()
    }).done(() => location.reload())
        .fail(xhr => alert(xhr.responseJSON?.message || 'Error'));
});
</script>
@endpush
```

**Exit criteria (Phase 20):**
- [ ] Admin can change active theme setting (`theme.active`)
- [ ] Theme adapter resolves assets/views based on active theme
- [ ] Modules do not hardcode theme paths

### Phase 20 Output
- [ ] ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô theme ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å admin (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 theme)
- [ ] ‡πÑ‡∏°‡πà‡∏°‡∏µ module ‡πÑ‡∏´‡∏ô hardcode theme path

---

## [Layer C] [Kernel] Phase 21: Backup/Restore (Tenant-aware roadmap) (6-10 hours)

### Objective
‡∏ß‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö backup ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢ tenant ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### In scope
- [ ] ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `backup_runs` + history list + trigger backup command
- [ ] Audit `backups.created` / `backups.failed`
- [ ] Restore ‡πÄ‡∏õ‡πá‡∏ô procedure ‡πÅ‡∏ö‡∏ö manual-first (documented)

### Out of scope
- [ ] One-click restore UI + automated validation
- [ ] Incremental backups, point-in-time recovery, cross-region replication
- [ ] Encryption key management UI / enterprise backup retention policies

### 21.1 Minimal Scope
- Backup DB + uploads (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ export + zip)
- Log history + audit `backups.created`
- Restore ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô manual-first (‡πÑ‡∏°‡πà‡∏ó‡∏≥ UI ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô)

### 21.2 Minimal Backup History + Command Snippets

**Migration:**
```php
// database/migrations/xxxx_xx_xx_xxxxxx_create_backup_runs_table.php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration {
        public function up(): void
        {
                Schema::create('backup_runs', function (Blueprint $table) {
                        $table->id();
                        $table->uuid('tenant_id')->nullable()->index();
                        $table->string('type', 30)->default('manual')->index();
                        $table->string('status', 30)->default('running')->index(); // running|success|failed
                        $table->string('path', 500)->nullable();
                        $table->unsignedBigInteger('size')->nullable();
                        $table->text('error')->nullable();
                        $table->timestamps();
                });
        }
};
```

**Command (pseudo-real, minimal):**
```php
// app/Console/Commands/TenantBackupCommand.php

namespace App\Console\Commands;

use Illuminate\Console\Command;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Str;

class TenantBackupCommand extends Command
{
        protected $signature = 'neonex:backup {--tenant=}';
        protected $description = 'Create a tenant-aware backup (DB + uploads minimal)';

        public function handle(): int
        {
                $tenantId = $this->option('tenant');
                $runId = DB::table('backup_runs')->insertGetId([
                        'tenant_id' => $tenantId,
                        'type' => 'manual',
                        'status' => 'running',
                        'created_at' => now(),
                        'updated_at' => now(),
                ]);

                try {
                        // Minimal placeholder: create an artifact path; real implementation can use mysqldump/pg_dump + zip
                        $path = 'backups/' . ($tenantId ?: 'global') . '_' . date('Ymd_His') . '_' . Str::random(6) . '.zip';

                        DB::table('backup_runs')->where('id', $runId)->update([
                                'status' => 'success',
                                'path' => $path,
                                'updated_at' => now(),
                        ]);

                        audit()->record('backups.created', ['path' => $path, 'tenant_id' => $tenantId]);
                        $this->info('Backup created: ' . $path);
                        return self::SUCCESS;
                } catch (\Throwable $e) {
                        DB::table('backup_runs')->where('id', $runId)->update([
                                'status' => 'failed',
                                'error' => $e->getMessage(),
                                'updated_at' => now(),
                        ]);
                        audit()->record('backups.failed', ['error' => $e->getMessage(), 'tenant_id' => $tenantId]);
                        $this->error($e->getMessage());
                        return self::FAILURE;
                }
        }
}
```

**Admin UI (trigger + list) minimal:**
```php
// routes/web.php
use App\Http\Controllers\Admin\BackupController;

Route::middleware(['web','auth','tenant.selected'])->prefix('admin')->name('admin.')->group(function(){
    Route::get('backups', [BackupController::class, 'index'])->name('backups.index');
    Route::post('backups/run', [BackupController::class, 'run'])->name('backups.run');
});
```

```php
// app/Http/Controllers/Admin/BackupController.php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Support\Facades\Artisan;
use Illuminate\Support\Facades\DB;

class BackupController extends Controller
{
        public function index()
        {
                $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
                $rows = DB::table('backup_runs')->where('tenant_id', $tenantId)->orderByDesc('id')->paginate(50);
                return view('admin.backups.index', compact('rows'));
        }

        public function run()
        {
                $tenantId = function_exists('tenant_id') ? tenant_id() : app('tenant.id');
                Artisan::call('neonex:backup', ['--tenant' => $tenantId]);
                return response()->json(['ok' => true]);
        }
}
```

```blade
{{-- resources/views/admin/backups/index.blade.php --}}
@extends('themes.limitless.layouts.app')

@section('content')
<div class="card">
    <div class="card-header"><h6 class="mb-0">Backups</h6></div>
    <div class="card-body">
        <button class="btn btn-primary mb-3" data-action="backup.run">Run backup</button>

        <div class="table-responsive">
            <table class="table table-sm">
                <thead><tr><th>ID</th><th>Time</th><th>Status</th><th>Path</th><th>Error</th></tr></thead>
                <tbody>
                    @foreach($rows as $r)
                        <tr>
                            <td>{{ $r->id }}</td>
                            <td>{{ $r->created_at }}</td>
                            <td>{{ $r->status }}</td>
                            <td>{{ $r->path }}</td>
                            <td class="text-danger">{{ $r->error }}</td>
                        </tr>
                    @endforeach
                </tbody>
            </table>
        </div>

        <div class="mt-3">{{ $rows->links() }}</div>
    </div>
</div>
@endsection

@push('scripts')
<script>
$(document).on('click','[data-action="backup.run"]', function(e){
    e.preventDefault();
    $.post('{{ route('admin.backups.run') }}', {_token: '{{ csrf_token() }}'})
        .done(() => location.reload())
        .fail(xhr => alert(xhr.responseJSON?.message || 'Error'));
});
</script>
@endpush
```

**Exit criteria (Phase 21):**
- [ ] Backup command can be triggered and records a run row
- [ ] Success/failure is logged in both `backup_runs` and audit
- [ ] Restore procedure is documented (manual-first)

### Phase 21 Output
- [ ] ‡∏°‡∏µ backup history table + command run
- [ ] ‡∏°‡∏µ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ restore procedure ‡πÅ‡∏ö‡∏ö‡∏ä‡∏±‡∏î

**Next optional: Phase 22‚Äì27 (Scale Add-on) ‚Üí** `PROJECT_REBUILD_PLAN_BOOTSTRAP_JQUERY_SCALE_ADDON.md`

### Optional Add-on Pack (Sold Separately)
- Phase 22-27 ‡∏ñ‡∏π‡∏Å‡πÅ‡∏¢‡∏Å‡πÑ‡∏õ‡πÑ‡∏ü‡∏•‡πå: `PROJECT_REBUILD_PLAN_BOOTSTRAP_JQUERY_SCALE_ADDON.md`
- ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö commercial/enterprise package ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ core plan ‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
- ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ scale features

**Core Total Time (Phase 0-21): 96-128 hours (12-16 days)**

---

## üöÄ AI-Optimized Development Tips

### For Cursor/AI:

1. **Always use Bootstrap classes** (not custom CSS)
2. **Use jQuery by default** (vanilla is allowed for small helpers)
3. **Keep code simple** (single responsibility)
4. **Use components** (don't repeat HTML)
5. **Follow examples** (copy patterns from this doc)

### Code Patterns to Follow:

**Controller Pattern:**
```php
class UserController extends Controller
{
    public function index()
    {
        $users = User::all();
        return view('users.index', compact('users'));
    }
    
    public function store(Request $request)
    {
        $validated = $request->validate([
            'name' => 'required|string|max:255',
            'email' => 'required|email|unique:users',
        ]);
        
        $user = User::create($validated);
        
        return response()->json($user);
    }
}
```

**jQuery AJAX Pattern:**
```javascript
$('.delete-btn').click(function() {
    if (!confirm('Are you sure?')) return;
    
    const id = $(this).closest('tr').data('id');
    
    $.ajax({
        url: '/users/' + id,
        type: 'DELETE',
        success: function() {
            showToast('Deleted successfully!');
            location.reload();
        },
        error: function(xhr) {
            alert('Error: ' + xhr.responseJSON.message);
        }
    });
});
```

**Form Validation Pattern:**
```javascript
$('#userForm').submit(function(e) {
    e.preventDefault();
    
    const formData = $(this).serialize();
    
    $.post('{{ route("users.store") }}', formData)
        .done(function(response) {
            showToast('Saved successfully!');
            location.href = '/users';
        })
        .fail(function(xhr) {
            // Show validation errors
            const errors = xhr.responseJSON.errors;
            $.each(errors, function(field, messages) {
                $(`[name="${field}"]`)
                    .addClass('is-invalid')
                    .after(`<div class="invalid-feedback">${messages[0]}</div>`);
            });
        });
});
```

---

## üìä Performance Optimization

### Asset Loading Strategy

**CDN First (Fast, Low Storage):**
- Bootstrap CSS/JS
- jQuery
- DataTables
- Chart.js
- Icons (Phosphor)

**Local Only (Custom):**
- Limitless theme CSS (minified)
- Limitless theme JS (minified)
- Custom app.js (minified)
- Logo, favicon, images

### Database Optimization

**Use Indexes:**
```php
$table->index('tenant_id');
$table->index('user_id');
$table->index(['tenant_id', 'user_id']);
```

**Eager Loading:**
```php
$users = User::with('roles', 'tenant')->get(); // Good
$users = User::all(); // Bad (N+1 queries)
```

### Cache Strategy

**Cache Views:**
```bash
php artisan view:cache
```

**Cache Config:**
```bash
php artisan config:cache
```

**Cache Routes:**
```bash
php artisan route:cache
```

---

## üìù Summary

### ‚úÖ Phase 0 Completed Means:

1. **Theme Ready** - Limitless fully integrated
2. **Layouts Ready** - Main layout + Auth layout
3. **Assets Optimized** - CDN first, local minified
4. **Helper Functions** - theme_asset(), render_assets()
5. **Shell Page Works** - Minimal UI shell verified (plain Bootstrap markup)

### üéØ Success Criteria:

- [ ] Can create a page using `@extends('themes.limitless.layouts.app')`
- [ ] Sidebar navigation works
- [ ] Header dropdown works
- [ ] Assets load from CDN correctly
- [ ] jQuery and Bootstrap work
- [ ] No console errors

> **Layer A reminder:** ‡πÉ‡∏ô Phase 0 (Layer A) ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ plain Bootstrap markup ‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô
> - `<x-limitless::...>` ‡πÅ‡∏•‡∏∞ DataTables pack ‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô Layer B/C ‡∏ï‡∏≤‡∏° gates

### üöÄ Ready for Phase 1!

Once Phase 0 is complete, we can proceed to **Phase 1: Authentication** with confidence that the UI foundation is solid and AI-friendly.

---

**Next: Phase 1 - Authentication System** ‚Üí
